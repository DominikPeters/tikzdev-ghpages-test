<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta content="LaTeX Lwarp package" name="generator" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Nodes and Shapes - PGF/TikZ Manual</title>
    <link href="style.css" rel="stylesheet" type="text/css" />

    <script>
      // Lwarp MathJax emulation code
      //
      // Based on code by Davide P. Cervone.
      // Equation numbering: https://github.com/mathjax/MathJax/issues/2427
      // Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
      // \left, \right delimiters: https://github.com/mathjax/MathJax/issues/2535
      //
      // Modified by Brian Dunn to adjust equation numbering and add subequations.
      //
      // LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
      // subequations? is 0 usually, 1 if inside subequations.
      // section is a string printed as-is, or empty.
      // number is auto-incremented by MathJax between equations.
      //
      MathJax = {
        subequations: "0",
        section: "",
        loader: {
          load: ["[tex]/tagformat", "[tex]/textmacros"],
        },
        startup: {
          ready() {
            // These would be replaced by import commands if you wanted to make
            // a proper extension.
            const Configuration =
              MathJax._.input.tex.Configuration.Configuration;
            const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
            const Macro = MathJax._.input.tex.Symbol.Macro;
            const TexError = MathJax._.input.tex.TexError.default;
            const ParseUtil = MathJax._.input.tex.ParseUtil.default;
            const expandable = MathJax._.util.Options.expandable;

            // Insert the replacement string into the TeX string, and check
            // that there haven't been too many maxro substitutions (prevents
            // infinite loops).
            const useArgument = (parser, text) => {
              parser.string = ParseUtil.addArgs(
                parser,
                text,
                parser.string.slice(parser.i)
              );
              parser.i = 0;
              if (
                ++parser.macroCount > parser.configuration.options.maxMacros
              ) {
                throw new TexError(
                  "MaxMacroSub1",
                  "MathJax maximum macro substitution count exceeded; " +
                    "is there a recursive macro call?"
                );
              }
            };

            // Create the command map for:
            // \ifstar, \ifnextchar, \ifblank, \ifstrequal, \seteqnumber
            new CommandMap(
              "Lwarp-macros",
              {
                ifstar: "IfstarFunction",
                ifnextchar: "IfnextcharFunction",
                ifblank: "IfblankFunction",
                ifstrequal: "IfstrequalFunction",
                seteqnumber: "SeteqnumberFunction",
              },
              {
                // This function implements an ifstar macro.
                IfstarFunction(parser, name) {
                  const resultstar = parser.GetArgument(name);
                  const resultnostar = parser.GetArgument(name);
                  const star = parser.GetStar(); // true if there is a *
                  useArgument(parser, star ? resultstar : resultnostar);
                },

                // This function implements an ifnextchar macro.
                IfnextcharFunction(parser, name) {
                  let whichchar = parser.GetArgument(name);
                  if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
                    // $ syntax highlighting
                    whichchar = String.fromCodePoint(parseInt(whichchar));
                  }
                  const resultnextchar = parser.GetArgument(name);
                  const resultnotnextchar = parser.GetArgument(name);
                  const gotchar = parser.GetNext() === whichchar;
                  useArgument(
                    parser,
                    gotchar ? resultnextchar : resultnotnextchar
                  );
                },

                // This function implements an ifblank macro.
                IfblankFunction(parser, name) {
                  const blankarg = parser.GetArgument(name);
                  const resultblank = parser.GetArgument(name);
                  const resultnotblank = parser.GetArgument(name);
                  const isblank = blankarg.trim() == "";
                  useArgument(parser, isblank ? resultblank : resultnotblank);
                },

                // This function implements an ifstrequal macro.
                IfstrequalFunction(parser, name) {
                  const strequalfirst = parser.GetArgument(name);
                  const strequalsecond = parser.GetArgument(name);
                  const resultequal = parser.GetArgument(name);
                  const resultnotequal = parser.GetArgument(name);
                  const isequal = strequalfirst == strequalsecond;
                  useArgument(parser, isequal ? resultequal : resultnotequal);
                },

                // This function modifies the equation numbers.
                SeteqnumberFunction(parser, name) {
                  // Get the macro parameters
                  const star = parser.GetStar(); // true if there is a *
                  const optBrackets = parser.GetBrackets(name); // contents of optional brackets
                  const newsubequations = parser.GetArgument(name); // the subequations argument
                  const neweqsection = parser.GetArgument(name); // the eq section argument
                  const neweqnumber = parser.GetArgument(name); // the eq number argument
                  MathJax.config.subequations = newsubequations; // a string with boolean meaning
                  MathJax.config.section = neweqsection; // a string with numeric meaning
                  parser.tags.counter = parser.tags.allCounter = neweqnumber;
                },
              }
            );

            // Create the Lwarp-macros package
            Configuration.create("Lwarp-macros", {
              handler: { macro: ["Lwarp-macros"] },
            });

            MathJax.startup.defaultReady();

            // For forward references:
            MathJax.startup.input[0].preFilters.add(({ math }) => {
              if (math.inputData.recompile) {
                MathJax.config.subequations =
                  math.inputData.recompile.subequations;
                MathJax.config.section = math.inputData.recompile.section;
              }
            });
            MathJax.startup.input[0].postFilters.add(({ math }) => {
              if (math.inputData.recompile) {
                math.inputData.recompile.subequations =
                  MathJax.config.subequations;
                math.inputData.recompile.section = MathJax.config.section;
              }
            });

            // For \left, \right with unicode-math:
            const { DelimiterMap } = MathJax._.input.tex.SymbolMap;
            const { Symbol } = MathJax._.input.tex.Symbol;
            const { MapHandler } = MathJax._.input.tex.MapHandler;
            const delimiter = MapHandler.getMap("delimiter");
            delimiter.add("\\lBrack", new Symbol("\\lBrack", "\u27E6"));
            delimiter.add("\\rBrack", new Symbol("\\rBrack", "\u27E7"));
            delimiter.add("\\lAngle", new Symbol("\\lAngle", "\u27EA"));
            delimiter.add("\\rAngle", new Symbol("\\rAngle", "\u27EB"));
            delimiter.add("\\lbrbrak", new Symbol("\\lbrbrak", "\u2772"));
            delimiter.add("\\rbrbrak", new Symbol("\\rbrbrak", "\u2773"));
            delimiter.add("\\lbag", new Symbol("\\lbag", "\u27C5"));
            delimiter.add("\\rbag", new Symbol("\\rbag", "\u27C6"));
            delimiter.add(
              "\\llparenthesis",
              new Symbol("\\llparenthesis", "\u2987")
            );
            delimiter.add(
              "\\rrparenthesis",
              new Symbol("\\rrparenthesis", "\u2988")
            );
            delimiter.add("\\llangle", new Symbol("\\llangle", "\u2989"));
            delimiter.add("\\rrangle", new Symbol("\\rrangle", "\u298A"));
            delimiter.add("\\Lbrbrak", new Symbol("\\Lbrbrak", "\u27EC"));
            delimiter.add("\\Rbrbrak", new Symbol("\\Rbrbrak", "\u27ED"));
            delimiter.add("\\lBrace", new Symbol("\\lBrace", "\u2983"));
            delimiter.add("\\rBrace", new Symbol("\\rBrace", "\u2984"));
            delimiter.add("\\lParen", new Symbol("\\lParen", "\u2985"));
            delimiter.add("\\rParen", new Symbol("\\rParen", "\u2986"));
            delimiter.add("\\lbrackubar", new Symbol("\\lbrackubar", "\u298B"));
            delimiter.add("\\rbrackubar", new Symbol("\\rbrackubar", "\u298C"));
            delimiter.add(
              "\\lbrackultick",
              new Symbol("\\lbrackultick", "\u298D")
            );
            delimiter.add(
              "\\rbracklrtick",
              new Symbol("\\rbracklrtick", "\u298E")
            );
            delimiter.add(
              "\\lbracklltick",
              new Symbol("\\lbracklltick", "\u298F")
            );
            delimiter.add(
              "\\rbrackurtick",
              new Symbol("\\rbrackurtick", "\u2990")
            );
            delimiter.add("\\langledot", new Symbol("\\langledot", "\u2991"));
            delimiter.add("\\rangledot", new Symbol("\\rangledot", "\u2992"));
            delimiter.add("\\lparenless", new Symbol("\\lparenless", "\u2993"));
            delimiter.add("\\rparengtr", new Symbol("\\rparengtr", "\u2994"));
            delimiter.add("\\Lparengtr", new Symbol("\\Lparengtr", "\u2995"));
            delimiter.add("\\Rparenless", new Symbol("\\Rparenless", "\u2996"));
            delimiter.add("\\lblkbrbrak", new Symbol("\\lblkbrbrak", "\u2997"));
            delimiter.add("\\rblkbrbrak", new Symbol("\\rblkbrbrak", "\u2998"));
            delimiter.add("\\lvzigzag", new Symbol("\\lvzigzag", "\u29D8"));
            delimiter.add("\\rvzigzag", new Symbol("\\rvzigzag", "\u29D9"));
            delimiter.add("\\Lvzigzag", new Symbol("\\Lvzigzag", "\u29DA"));
            delimiter.add("\\Rvzigzag", new Symbol("\\Rvzigzag", "\u29DB"));
            delimiter.add(
              "\\lcurvyangle",
              new Symbol("\\lcurvyangle", "\u29FC")
            );
            delimiter.add(
              "\\rcurvyangle",
              new Symbol("\\rcurvyangle", "\u29FD")
            );
            delimiter.add("\\Vvert", new Symbol("\\Vvert", "\u2980"));
          }, // ready
        }, // startup

        tex: {
          packages: { "[+]": ["tagformat", "Lwarp-macros", "textmacros"] },
          tags: "ams",
          tagformat: {
            number: function (n) {
              if (MathJax.config.subequations == 0)
                return MathJax.config.section + n;
              else return MathJax.config.section + String.fromCharCode(96 + n);
            },
          },
        },
      };
    </script>

    <script
      async
      id="MathJax-script"
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
    ></script>

    <script src="pgfmanual.js"></script>

    <link href="https://unpkg.com/@docsearch/css@alpha" rel="stylesheet" />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link
      href="/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
      type="image/png"
    />
    <link href="/site.webmanifest" rel="manifest" />
  </head>
  <body>
    <a id="pgfmanual-autopage-8001"></a>

    <div class="bodyandsidetoc grid-container">
      <header>
        <strong><a href="/">PGF/Ti<i>k</i>Z Manual</a></strong>
        <div id="search"></div>
      </header>
      <div class="sidetoccontainer" id="local-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle"><p>On this page</p></div>
          <div class="sidetoccontents">
            <p><a class="tocsubsection" href="#sec-105.1">Overview</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.1.1"
                >Creating and Referencing Nodes</a
              >
            </p>
            <p><a class="tocsubsubsection" href="#sec-105.1.2">Anchors</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.1.3"
                >Layers of a Shape</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.1.4">Node Parts</a>
            </p>
            <p><a class="tocsubsection" href="#sec-105.2">Creating Nodes</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.2.1"
                >Creating Simple Nodes</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.2.2"
                >Creating Multi-Part Nodes</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.2.3"
                >Deferred Node Positioning</a
              >
            </p>
            <p><a class="tocsubsection" href="#sec-105.3">Using Anchors</a></p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.3.1"
                >Referencing Anchors of Nodes in the Same Picture</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.3.2"
                >Referencing Anchors of Nodes in Different Pictures</a
              >
            </p>
            <p><a class="tocsubsection" href="#sec-105.4">Special Nodes</a></p>
            <p>
              <a class="tocsubsection" href="#sec-105.5"
                >Declaring New Shapes</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.5.1"
                >What Must Be Defined For a Shape?</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.5.2"
                >Normal Anchors Versus Saved Anchors</a
              >
            </p>
            <p>
              <a class="tocsubsubsection" href="#sec-105.5.3"
                >Command for Declaring New Shapes</a
              >
            </p>
          </div>
        </nav>
      </div>
      <div class="sidetoccontainer" id="chapter-toc-container">
        <nav class="sidetoc">
          <div class="sidetoctitle">
            <p>
              <span class="sidetocthetitle"
                >The <span class="tikzname">TikZ</span> and PGF Packages<br />
                Manual for version 3.1.9a</span
              >
            </p>

            <p>Contents</p>
          </div>

          <div class="sidetoccontents">
            <p></p>

            <p>
              <a class="linkintro" href="/">Introduction</a>
            </p>

            <p>
              <a class="tocpart" href="tutorials-guidelines"
                >Tutorials and Guidelines</a
              >
            </p>

            <p>
              <a class="tocpart" href="install"
                >Installation and Configuration</a
              >
            </p>

            <p>
              <a class="tocpart" href="tikz">Ti<em>k</em>Z</a>
            </p>

            <p>
              <a class="tocpart" href="gd">Graph Drawing</a>
            </p>

            <p>
              <a class="tocpart" href="libraries">Libraries</a>
            </p>

            <p>
              <a class="tocpart" href="dv">Data Visualization</a>
            </p>

            <p>
              <a class="tocpart" href="utilities">Utilities</a>
            </p>

            <p>
              <a class="tocpart" href="math"
                >Mathematical and Object-Oriented Engines</a
              >
            </p>

            <p class="current-part">
              <a class="tocpart" href="base">The Basic Layer</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-design">Design Principles</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-scopes"
                >Hierarchical Structures: Package, Environments, Scopes, and
                Text</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-points"
                >Specifying Coordinates</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-paths">Constructing Paths</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-decorations">Decorations</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-actions">Using Paths</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-arrows"
                >Defining New Arrow Tip Kinds</a
              >
            </p>

            <p class="current current-part">
              <a class="tocsection" href="base-nodes">Nodes and Shapes</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-matrices">Matrices</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-transformations"
                >Coordinate, Canvas, and Nonlinear Transformations</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-patterns">Patterns</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-images"
                >Declaring and Using Images</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-external"
                >Externalizing Graphics</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-plots">Creating Plots</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-layers">Layered Graphics</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-shadings">Shadings</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-transparency">Transparency</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-animations">Animations</a>
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-internalregisters"
                >Adding libraries to <span class="textsc">pgf</span>: temporary
                registers</a
              >
            </p>

            <p class="current-part">
              <a class="tocsection" href="base-quick">Quick Commands</a>
            </p>

            <p>
              <a class="tocpart" href="pgfsys">The System Layer</a>
            </p>
          </div>
        </nav>
      </div>

      <main class="bodycontainer">
        <section class="textbody">
          <h1>
            The <span class="tikzname">TikZ</span> and PGF Packages<br />
            Manual for version 3.1.9a
          </h1>
          <h2 class="inserted">The Basic Layer</h2>

          <!--MathJax customizations:-->

          <div class="hidden">
            \(\newcommand{\footnotename}{footnote}\) \(\def \LWRfootnote {1}\)
            \(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)
            \(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm
            {#1}}}\) \(\let \LWRorighspace \hspace \) \(\renewcommand {\hspace
            }{\ifstar \LWRorighspace \LWRorighspace }\) \(\newcommand
            {\mathnormal }[1]{{#1}}\) \(\newcommand \ensuremath [1]{#1}\)
            \(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand
            {\framebox }[1][]{\LWRframebox } \) \(\newcommand {\setlength
            }[2]{}\) \(\newcommand {\addtolength }[2]{}\) \(\newcommand
            {\setcounter }[2]{}\) \(\newcommand {\addtocounter }[2]{}\)
            \(\newcommand {\arabic }[1]{}\) \(\newcommand {\number }[1]{}\)
            \(\newcommand {\noalign }[1]{\text {#1}\notag \\}\) \(\newcommand
            {\cline }[1]{}\) \(\newcommand {\directlua }[1]{\text
            {(directlua)}}\) \(\newcommand {\luatexdirectlua }[1]{\text
            {(directlua)}}\) \(\newcommand {\protect }{}\) \(\def
            \LWRabsorbnumber #1 {}\) \(\def \LWRabsorbquotenumber "#1 {}\)
            \(\newcommand {\LWRabsorboption }[1][]{}\) \(\newcommand
            {\LWRabsorbtwooptions }[1][]{\LWRabsorboption }\) \(\def \mathchar
            {\ifnextchar "\LWRabsorbquotenumber \LWRabsorbnumber }\) \(\def
            \mathcode #1={\mathchar }\) \(\let \delcode \mathcode \) \(\let
            \delimiter \mathchar \) \(\def \oe {\unicode {x0153}}\) \(\def \OE
            {\unicode {x0152}}\) \(\def \ae {\unicode {x00E6}}\) \(\def \AE
            {\unicode {x00C6}}\) \(\def \aa {\unicode {x00E5}}\) \(\def \AA
            {\unicode {x00C5}}\) \(\def \o {\unicode {x00F8}}\) \(\def \O
            {\unicode {x00D8}}\) \(\def \l {\unicode {x0142}}\) \(\def \L
            {\unicode {x0141}}\) \(\def \ss {\unicode {x00DF}}\) \(\def \SS
            {\unicode {x1E9E}}\) \(\def \dag {\unicode {x2020}}\) \(\def \ddag
            {\unicode {x2021}}\) \(\def \P {\unicode {x00B6}}\) \(\def
            \copyright {\unicode {x00A9}}\) \(\def \pounds {\unicode {x00A3}}\)
            \(\let \LWRref \ref \) \(\renewcommand {\ref }{\ifstar \LWRref
            \LWRref }\) \( \newcommand {\multicolumn }[3]{#3}\) \(\require
            {textcomp}\) \( \newcommand {\meta }[1]{\langle \textit {#1}\rangle
            } \) \(\newcommand {\intertext }[1]{\text {#1}\notag \\}\) \(\let
            \Hat \hat \) \(\let \Check \check \) \(\let \Tilde \tilde \) \(\let
            \Acute \acute \) \(\let \Grave \grave \) \(\let \Dot \dot \) \(\let
            \Ddot \ddot \) \(\let \Breve \breve \) \(\let \Bar \bar \) \(\let
            \Vec \vec \)
          </div>

          <p></p>
          <h4 id="autosec-8002">
            <a id="section-shapes"></a
            ><span class="sectionnumber">105&emsp;</span>Nodes and Shapes
          </h4>
          <a id="pgfmanual-autopage-8002"></a>
          <a id="pgfmanual-autofile-114"></a>

          <p>
            This section describes the
            <span class="texttt">shapes</span> module.
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.shapes"></a>
                <span class="hl-def"
                  ><kbd
                    >\usepgfmodule{<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shapes</span
                    >} %
                    <span class="latexlogofont"
                      ><span class="latexlogo"
                        >L<span class="latexlogosup">a</span>T<span
                          class="latexlogosub"
                          >e</span
                        >X</span
                      ></span
                    >
                    and plain
                    <span class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >
                    and pure pgf</kbd
                  ></span
                >
                <a class="anchor-link" href="#pgf.shapes">&para;</a>
              </p>
            </div>

            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    >\usepgfmodule[<span
                      class="textcolor"
                      style="color: #bf0000"
                      >shapes</span
                    >] % Con<span class="latexlogofont"
                      ><span class="latexlogo"
                        >T<span class="latexlogosub">e</span>X</span
                      ></span
                    >t and pure pgf</kbd
                  ></span
                >
              </p>
            </div>
            <p>
              This module defines commands both for creating nodes and for
              creating shapes. The package is loaded automatically by
              <span class="texttt">pgf</span>, but you can load it manually if
              you have only included <span class="texttt">pgfcore</span>.
            </p>
          </div>
          <h5 id="autosec-8004">
            <span class="sectionnumber" id="sec-105.1">105.1&emsp;</span
            >Overview<a class="anchor-link" href="#sec-105.1">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-8004"></a>

          <p>
            <span class="textsc">pgf</span> comes with a sophisticated set of
            commands for creating <em>nodes</em> and <em>shapes</em>. A
            <em>node</em> is a graphical object that consists (typically) of
            (one or more) text labels and some additional stroked or filled
            paths. Each node has a certain <em>shape</em>, which may be
            something simple like a <span class="texttt">rectangle</span> or a
            <span class="texttt">circle</span>, but it may also be something
            complicated like a
            <span class="texttt">uml class diagram</span> (this shape is
            currently not implemented, though). Different nodes that have the
            same shape may look quite different, however, since shapes (need
            not) specify whether the shape path is stroked or filled.
          </p>
          <h6 id="autosec-8005">
            <span class="sectionnumber" id="sec-105.1.1">105.1.1&emsp;</span
            >Creating and Referencing Nodes<a
              class="anchor-link"
              href="#sec-105.1.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8005"></a>

          <p>
            You create a node by calling the macro
            <span class="texttt">\pgfnode</span> or the more general
            <span class="texttt">\pgfmultipartnode</span>. This macro takes
            several parameters and draws the requested shape at a certain
            position. In addition, it will &ldquo;remember&rdquo; the
            node&rsquo;s position within the current
            <span class="texttt">{pgfpicture}</span>. You can then, later on,
            refer to the node&rsquo;s position. Coordinate transformations are
            &ldquo;fully supported&rdquo;, which means that if you used
            coordinate transformations to shift or rotate the shape of a node,
            the node&rsquo;s position will still be correctly determined by
            <span class="textsc">pgf</span>. This is <em>not</em> the case if
            you use canvas transformations instead.
          </p>
          <h6 id="autosec-8006">
            <span class="sectionnumber" id="sec-105.1.2">105.1.2&emsp;</span
            >Anchors<a class="anchor-link" href="#sec-105.1.2">&para;</a>
          </h6>
          <a id="pgfmanual-autopage-8006"></a>

          <p>
            An important property of a node or a shape in general are its
            <em>anchors</em>. Anchors are &ldquo;important&rdquo; positions in a
            shape. For example, the <span class="texttt">center</span> anchor
            lies at the center of a shape, the
            <span class="texttt">north</span> anchor is usually &ldquo;at the
            top, in the middle&rdquo; of a shape, the
            <span class="texttt">text</span> anchor is the lower left corner of
            the shape&rsquo;s text label (if present), and so on.
          </p>

          <p>
            Anchors are important both when you create a node and when you
            reference it. When you create a node, you specify the node&rsquo;s
            &ldquo;position&rdquo; by asking <span class="textsc">pgf</span> to
            place the shape in such a way that a certain anchor lies at a
            certain point. For example, you might ask that the node is placed
            such that the <span class="texttt">north</span> anchor is at the
            origin. This will effectively cause the node to be placed below the
            origin.
          </p>

          <p>
            When you reference a node, you always reference an anchor of the
            node. For example, when you request the &ldquo;<span class="texttt"
              >north</span
            >
            anchor of the node just placed&rdquo; you will get the origin.
            However, you can also request the &ldquo;<span class="texttt"
              >south</span
            >
            anchor of this node&rdquo;, which will give you a point somewhere
            below the origin. When a coordinate transformation was in force at
            the time of creation of a node, all anchors are also transformed
            accordingly.
          </p>
          <h6 id="autosec-8007">
            <span class="sectionnumber" id="sec-105.1.3">105.1.3&emsp;</span
            >Layers of a Shape<a class="anchor-link" href="#sec-105.1.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8007"></a>

          <p>
            The simplest shape, the <span class="texttt">coordinate</span>, has
            just one anchor, namely the <span class="texttt">center</span>, and
            a label (which is usually empty). More complicated shapes like the
            <span class="texttt">rectangle</span> shape also have a
            <em>background path</em>. This is a
            <span class="textsc">pgf</span>-path that is defined by the shape.
            The shape does not prescribe what should happen with the path: When
            a node is created, this path may be stroked (resulting in a frame
            around the label), filled (resulting in a background color for the
            text), or just discarded.
          </p>

          <p>
            Although most shapes consist just of a background path plus some
            label text, when a shape is drawn, up to seven different layers are
            drawn:
          </p>
          <ul style="list-style-type: none">
            <li>
              <p>
                1. The &ldquo;behind the background layer&rdquo;. Unlike the
                background path, which can be used in different ways by
                different nodes, the graphic commands given for this layer will
                always stroke or always fill the path they construct. They might
                also insert some text that is &ldquo;behind everything&rdquo;.
              </p>
            </li>
            <li>
              <p>
                2. The background path layer. How this path is used depends on
                the arguments of the
                <span class="texttt">\pgfnode</span> command.
              </p>
            </li>
            <li>
              <p>
                3. The &ldquo;before the background path layer&rdquo;. This
                layer works like the first one, only the commands of this layer
                are executed after the background path has been used (in
                whatever way the creator of the node chose).
              </p>
            </li>
            <li>
              <p>
                4. The label layer. This layer inserts the node&rsquo;s text
                box(es).
              </p>
            </li>
            <li>
              <p>
                5. The &ldquo;behind the foreground layer&rdquo;. This layer,
                like the first layer, once more contains graphic commands that
                are &ldquo;simply executed&rdquo;.
              </p>
            </li>
            <li>
              <p>
                6. The foreground path layer. This path is treated in the same
                way as the background path, only it is drawn after the label
                text has been drawn.
              </p>
            </li>
            <li>
              <p>7. The &ldquo;before the foreground layer&rdquo;.</p>
            </li>
          </ul>

          <p>Which of these layers are actually used depends on the shape.</p>
          <h6 id="autosec-8008">
            <span class="sectionnumber" id="sec-105.1.4">105.1.4&emsp;</span
            >Node Parts<a class="anchor-link" href="#sec-105.1.4">&para;</a>
          </h6>
          <a id="pgfmanual-autopage-8008"></a>

          <p>
            A shape typically does not consist only of different background and
            foreground paths, but it may also have text labels. Indeed, for many
            shapes the text labels are the more important part of the shape.
          </p>

          <p>
            Most shapes will have only one text label. In this case, this text
            label is simply passed as a parameter to the
            <span class="texttt">\pgfnode</span> command. When the node is
            drawn, the text label is shifted around such that its lower left
            corner is at the <span class="texttt">text</span> anchor of the
            node.
          </p>

          <p>
            More complicated shapes may have more than one text label. Nodes of
            such shapes are called <em>multipart nodes</em>. The different
            <em>node parts</em> are simply the different text labels. For
            example, a <span class="texttt">uml class</span> shape might have a
            <span class="texttt">class name</span> part, a
            <span class="texttt">method</span> part and an
            <span class="texttt">attributes</span> part. Indeed, single part
            nodes are a special case of multipart nodes: They only have one part
            named <span class="texttt">text</span>.
          </p>

          <p>
            When a shape is declared, you must specify the node parts. There is
            a simple command called <span class="texttt">\nodeparts</span> that
            takes a list of the part names as input. When you create a node of a
            multipart shape, for each part of the node you must have set up a
            <span class="latexlogofont"
              ><span class="latexlogo"
                >T<span class="latexlogosub">e</span>X</span
              ></span
            >-box containing the text of the part. For a part named
            <span class="texttt">XYZ</span> you must set up the box
            <span class="texttt">\pgfnodepartXYZbox</span>. The box will be
            placed at the anchor <span class="texttt">XYZ</span>. See the
            description of <span class="texttt">\pgfmultipartnode</span> for
            more details.
          </p>
          <h5 id="autosec-8009">
            <span class="sectionnumber" id="sec-105.2">105.2&emsp;</span
            >Creating Nodes<a class="anchor-link" href="#sec-105.2">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-8009"></a>
          <h6 id="autosec-8010">
            <span class="sectionnumber" id="sec-105.2.1">105.2.1&emsp;</span
            >Creating Simple Nodes<a class="anchor-link" href="#sec-105.2.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8010"></a>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfnode"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfnode</kbd></span
                  >{<span class="angle">&langle;</span><i>shape</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>anchor</i><span class="angle">&rangle;</span>}{<span
                    class="angle"
                    >&langle;</span
                  ><i>label text</i><span class="angle">&rangle;</span>}{<span
                    class="angle"
                    >&langle;</span
                  ><i>name</i><span class="angle">&rangle;</span>}{<span
                    class="angle"
                    >&langle;</span
                  ><i>path usage command</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfnode">&para;</a>
              </p>
            </div>
            <p>
              This command creates a new node. The
              <span class="angle">&langle;</span><i>shape</i
              ><span class="angle">&rangle;</span> of the node must have been
              declared previously using
              <span class="texttt">\pgfdeclareshape</span>.
            </p>
            <p>
              The shape is shifted such that the
              <span class="angle">&langle;</span><i>anchor</i
              ><span class="angle">&rangle;</span> is at the origin. In order to
              place the shape somewhere else, use the coordinate transformation
              prior to calling this command.
            </p>
            <p>
              The <span class="angle">&langle;</span><i>name</i
              ><span class="angle">&rangle;</span> is a name for later
              reference. If no name is given, nothing will be
              &ldquo;saved&rdquo; for the node, it will just be drawn.
            </p>
            <p>
              The <span class="angle">&langle;</span><i>path usage command</i
              ><span class="angle">&rangle;</span> is executed for the
              background and the foreground path (if the shape defines them).
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3220"
                    ><!--
              World
      Hello
Hello World
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="116.330"
                      loading="lazy"
                      src="pgfmanual-images/image-3220.png"
                      style
                      width="154.125"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(0,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(4,3)</span
                  >;<br />
                  &numsp;&numsp;{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformshift"
                      >\pgftransformshift</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">1</span
                  >.<span class="textcolor" style="color: #000000">5cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">north</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{<span class="textcolor" style="color: #000000"
                    >hellonode</span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  &numsp;&numsp;}<br />
                  &numsp;&numsp;{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\color</span
                  >{<span class="textcolor" style="color: #000000">red!20</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformrotate"
                      >\pgftransformrotate</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">10</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformshift"
                      >\pgftransformshift</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">3cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\color</span
                  >{<span class="textcolor" style="color: #000000">black</span
                  >}<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{<span class="textcolor" style="color: #000000"
                    >hellonode</span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}}<br />
                  &numsp;&numsp;}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              As can be seen, all coordinate transformations are also applied to
              the text of the shape. Sometimes, it is desirable that the
              transformations are applied to the point where the shape will be
              anchored, but you do not wish the shape itself to be transformed.
              In this case, you should call
              <span class="texttt">\pgftransformresetnontranslations</span>
              prior to calling the <span class="texttt">\pgfnode</span> command.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3221"
                    ><!--
Hello World
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="116.330"
                      loading="lazy"
                      src="pgfmanual-images/image-3221.png"
                      style
                      width="154.125"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(0,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(4,3)</span
                  >;<br />
                  &numsp;&numsp;{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\color</span
                  >{<span class="textcolor" style="color: #000000">red!20</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformrotate"
                      >\pgftransformrotate</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">10</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformshift"
                      >\pgftransformshift</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">3cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a
                      href="base-transformations#pgf.back/pgftransformresetnontranslations"
                      >\pgftransformresetnontranslations</a
                    ></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;{<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\color</span
                  >{<span class="textcolor" style="color: #000000">black</span
                  >}<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{<span class="textcolor" style="color: #000000"
                    >hellonode</span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}}<br />
                  &numsp;&numsp;}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              The <span class="angle">&langle;</span><i>label text</i
              ><span class="angle">&rangle;</span> is typeset inside the
              <span class="latexlogofont"
                ><span class="latexlogo"
                  >T<span class="latexlogosub">e</span>X</span
                ></span
              >-box <span class="texttt">\pgfnodeparttextbox</span>. This box is
              shown at the <span class="texttt">text</span> anchor of the node,
              if the node has a <span class="texttt">text</span> part. See the
              description of <span class="texttt">\pgfmultipartnode</span> for
              details.
            </p>
          </div>
          <h6 id="autosec-8015">
            <span class="sectionnumber" id="sec-105.2.2">105.2.2&emsp;</span
            >Creating Multi-Part Nodes<a class="anchor-link" href="#sec-105.2.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8015"></a>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfmultipartnode"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfmultipartnode</kbd></span
                  >{<span class="angle">&langle;</span><i>shape</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>anchor</i><span class="angle">&rangle;</span>}{<span
                    class="angle"
                    >&langle;</span
                  ><i>name</i><span class="angle">&rangle;</span>}{<span
                    class="angle"
                    >&langle;</span
                  ><i>path usage command</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfmultipartnode"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command is the more general (and less user-friendly) version
              of the <span class="texttt">\pgfnode</span> command. While the
              <span class="texttt">\pgfnode</span> command can only be used for
              shapes that have a single part (which is the case for most
              shapes), this command can also be used with multi-part nodes.
            </p>
            <p>
              When this command is called, for each node part of the node you
              must have set up one
              <span class="latexlogofont"
                ><span class="latexlogo"
                  >T<span class="latexlogosub">e</span>X</span
                ></span
              >-box. Suppose the shape has two parts: The
              <span class="texttt">text</span> part and the
              <span class="texttt">lower</span> part. Then, prior to calling
              <span class="texttt">\pgfmultipartnode</span>, you must have set
              up the boxes <span class="texttt">\pgfnodeparttextbox</span> and
              <span class="texttt">\pgfnodepartlowerbox</span>. These boxes may
              contain any
              <span class="latexlogofont"
                ><span class="latexlogo"
                  >T<span class="latexlogosub">e</span>X</span
                ></span
              >-text. The shape code will then compute the positions of the
              shape&rsquo;s anchors based on the sizes of the these shapes.
              Finally, when the node is drawn, the boxes are placed at the
              anchor positions <span class="texttt">text</span> and
              <span class="texttt">lower</span>.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3222"
                    ><!--
\(q_1\)
  01
   -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="65.211"
                      loading="lazy"
                      src="pgfmanual-images/image-3222.png"
                      style
                      width="65.199"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <span class="c- preamble">\usetikzlibrary {shapes} </span
                  ><br />
                  <span class="textcolor" style="color: #0000b2">\setbox</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodeparttextbox</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\hbox</span
                  >{<span class="textcolor" style="color: #000000">$q_1$</span
                  >}<br />
                  <span class="textcolor" style="color: #0000b2">\setbox</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodepartlowerbox</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\hbox</span
                  >{<span class="textcolor" style="color: #000000">01</span
                  >}<br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfmultipartnode"
                      >\pgfmultipartnode</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.circle">circle</a></span
                  >
                  <span class="textcolor" style="color: #000000">split</span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">my</span>
                  <span class="textcolor" style="color: #000000"
                    ><a href="library-automata#pgf.state">state</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              <em>Note:</em> Be careful when using the
              <span class="texttt">\setbox</span> command inside a
              <span class="texttt">{pgfpicture}</span> command. You will have to
              use <span class="texttt">\pgfinterruptpath</span> at the beginning
              of the box and <span class="texttt">\endpgfinterruptpath</span> at
              the end of the box to make sure that the box is typeset correctly.
              In the above example this problem was sidestepped by moving the
              box construction outside the environment.
            </p>
            <p>
              <em>Note:</em> It is not necessary to use
              <span class="texttt">\newbox</span> for every node part name.
              Although you need a different box for each part of a single shape,
              two different shapes may very well use the same box even when the
              names of the parts are different. Suppose you have a
              <span class="texttt">circle split</span> shape that has a
              <span class="texttt">lower</span> part and you have a
              <span class="texttt">uml class</span> shape that has a
              <span class="texttt">methods</span> part. Then, in order to avoid
              exhausting
              <span class="latexlogofont"
                ><span class="latexlogo"
                  >T<span class="latexlogosub">e</span>X</span
                ></span
              >&rsquo;s limited number of box registers, you can say
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2">\newbox</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodepartlowerbox</span
                  ><br />
                  <span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodepartmethodsbox</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodepartlowerbox</span
                  ><br />
                </code>
              </div>
            </figure>
            <p>
              Also, when you have a node part name with spaces like
              <span class="texttt">class name</span>, it may be useful to create
              an alias:
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2">\newbox</span
                  ><span class="textcolor" style="color: #0000b2">\mybox</span
                  ><br />
                  <span class="textcolor" style="color: #0000b2"
                    >\expandafter</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\csname</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    >pgfnodepartclass</span
                  >
                  <span class="textcolor" style="color: #000000">namebox</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\endcsname</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\mybox</span
                  ><br />
                </code>
              </div>
            </figure>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfcoordinate"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfcoordinate</kbd></span
                  >{<span class="angle">&langle;</span><i>name</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>coordinate</i><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfcoordinate">&para;</a>
              </p>
            </div>
            <p>
              This command creates a node of shape
              <span class="texttt">coordinate</span> at the given
              <span class="angle">&langle;</span><i>coordinate</i
              ><span class="angle">&rangle;</span>. Exactly the same effect can
              be achieved using first a shift of the coordinate system to
              <span class="angle">&langle;</span><i>coordinate</i
              ><span class="angle">&rangle;</span>, followed by creating a node
              of shape <span class="texttt">coordinate</span> named
              <span class="angle">&langle;</span><i>name</i
              ><span class="angle">&rangle;</span>. However, this command is
              easier and more natural to use and, more importantly, it is much
              faster.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfnodealias"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfnodealias</kbd></span
                  >{<span class="angle">&langle;</span><i>new name</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>existing node</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfnodealias">&para;</a>
              </p>
            </div>
            <p>
              This command does not actually create a new node. Rather, it
              allows you to subsequently access the node
              <span class="angle">&langle;</span><i>existing node</i
              ><span class="angle">&rangle;</span> using the name
              <span class="angle">&langle;</span><i>new name</i
              ><span class="angle">&rangle;</span>.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfnoderename"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfnoderename</kbd></span
                  >{<span class="angle">&langle;</span><i>new name</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>existing node</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfnoderename">&para;</a>
              </p>
            </div>
            <p>This command renames an existing node.</p>
          </div>

          <p>
            There are a number of values that have an influence on the size of a
            node. These values are stored in the following keys.
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/minimum width</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>1pt</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/minimum width</kbd></p>
            <p>
              This key stores the <em>recommended</em> minimum width of a shape.
              Thus, when a shape is drawn and when the shape&rsquo;s width would
              be smaller than <span class="angle">&langle;</span><i>dimension</i
              ><span class="angle">&rangle;</span>, the shape&rsquo;s width is
              enlarged by adding some empty space.
            </p>
            <p>
              Note that this value is just a recommendation. A shape may choose
              to ignore this key.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3223"
                    ><!--
Hello World
  -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="49.949"
                      loading="lazy"
                      src="pgfmanual-images/image-3223.png"
                      style
                      width="154.136"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(-2,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(2,1)</span
                  >;<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\pgfset</span
                  >{<span class="textcolor" style="color: #000000"
                    >minimum</span
                  >
                  <span class="textcolor" style="color: #000000">width=3cm</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/minimum height</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>1pt</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/minimum height</kbd></p>
            <p>Works like <span class="texttt">/pgf/minimum width</span>.</p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/minimum size</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span></span
                ><span class="hl-default">(no default)</span>
              </p>
            </div>

            <p>alias <kbd>/tikz/minimum size</kbd></p>
            <p>
              This style both <span class="texttt">/pgf/minimum width</span> and
              <span class="texttt">/pgf/minimum height</span> to
              <span class="angle">&langle;</span><i>dimension</i
              ><span class="angle">&rangle;</span>.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/inner xsep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>0.3333em</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/inner xsep</kbd></p>
            <p>
              This key stores the <em>recommended</em> horizontal inner
              separation between the label text and the background path. As
              before, this value is just a recommendation and a shape may choose
              to ignore this key.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3224"
                    ><!--
Hello World
  -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="49.949"
                      loading="lazy"
                      src="pgfmanual-images/image-3224.png"
                      style
                      width="160.125"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(-2,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(2,1)</span
                  >;<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\pgfset</span
                  >{<span class="textcolor" style="color: #000000">inner</span>
                  <span class="textcolor" style="color: #000000">xsep=1cm</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/inner ysep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>0.3333em</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/inner ysep</kbd></p>
            <p>Works like <span class="texttt">/pgf/inner xsep</span>.</p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/inner sep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span></span
                ><span class="hl-default">(no default)</span>
              </p>
            </div>

            <p>alias <kbd>/tikz/inner sep</kbd></p>
            <p>
              This style sets both
              <span class="texttt">/pgf/inner xsep</span> and
              <span class="texttt">/pgf/inner ysep</span> to
              <span class="angle">&langle;</span><i>dimension</i
              ><span class="angle">&rangle;</span>.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/outer xsep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>.5\pgflinewidth</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/outer xsep</kbd></p>
            <p>
              This key stores the recommended horizontal separation between the
              background path and the &ldquo;outer anchors&rdquo;. For example,
              if <span class="angle">&langle;</span><i>dimension</i
              ><span class="angle">&rangle;</span> is
              <span class="texttt">1cm</span> then the
              <span class="texttt">east</span> anchor will be 1cm to the right
              of the right border of the background path. As before, this value
              is just a recommendation.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3225"
                    ><!--
Hello World
  -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="52.611"
                      loading="lazy"
                      src="pgfmanual-images/image-3225.png"
                      style
                      width="154.136"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(-2,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(2,1)</span
                  >;<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\pgfset</span
                  >{<span class="textcolor" style="color: #000000">outer</span>
                  <span class="textcolor" style="color: #000000">xsep=</span
                  >.<span class="textcolor" style="color: #000000">5cm</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World</span
                  >}{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">north</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">south</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">east</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">west</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">north</span>
                  <span class="textcolor" style="color: #000000">east</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/outer ysep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span> </span
                ><span class="hl-default"
                  >(no default, initially <kbd>.5\pgflinewidth</kbd>)</span
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/outer ysep</kbd></p>
            <p>Works like <span class="texttt">/pgf/outer xsep</span>.</p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/outer sep</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>dimension</i
                  ><span class="angle">&rangle;</span></span
                ><span class="hl-default">(no default)</span>
              </p>
            </div>

            <p>alias <kbd>/tikz/outer sep</kbd></p>
            <p>
              This style sets both
              <span class="texttt">/pgf/outer xsep</span> and
              <span class="texttt">/pgf/outer ysep</span> to
              <span class="angle">&langle;</span><i>dimension</i
              ><span class="angle">&rangle;</span>.
            </p>
          </div>
          <h6 id="autosec-8024">
            <a id="section-shapes-deferred-node-positioning"></a
            ><span class="sectionnumber" id="sec-105.2.3">105.2.3&emsp;</span
            >Deferred Node Positioning<a class="anchor-link" href="#sec-105.2.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8024"></a>

          <p>
            Normally, when a node is created using a command like
            <span class="texttt">\pgfnode</span>, the node is immediately
            inserted into the current picture. In particular, you have no chance
            to change the position of a created node after it has been created.
            Using <span class="texttt">\pgfpositionnodelater</span> in concert
            with <span class="texttt">\pgfpositionnodenow</span>, you can create
            a node whose position is determined only at some later time.
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfpositionnodelater"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfpositionnodelater</kbd></span
                  >{<span class="angle">&langle;</span><i>macro name</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfpositionnodelater"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command is not a replacement for
              <span class="texttt">\pgfnode</span>. Rather, when this command is
              used in a scope, all subsequent node creations in this scope will
              be affected in the following way: When a node is created, it is
              not inserted into the current picture. Instead, it is stored in
              the box <span class="texttt">\pgfpositionnodelaterbox</span>.
              Furthermore, the node is not relevant for the picture&rsquo;s
              bounding box, but a bounding box for the node is computed and
              stored in the macros
              <span class="texttt">\pgfpositionnodelaterminx</span> to
              <span class="texttt">\pgfpositionnodelatermaxy</span>. Then, the
              <span class="angle">&langle;</span><i>macro name</i
              ><span class="angle">&rangle;</span> is called with the following
              macros set up:
            </p>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelaterbox"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelaterbox</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelaterbox"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                A box register number (<span class="texttt">0</span> currently)
                that stores the node&rsquo;s paths and texts. You should move
                the contents of this box to a box of your choice inside
                <span class="angle">&langle;</span><i>macro name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelatername"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelatername</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelatername"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                The name of the just-created-node. This name will be the
                originally &ldquo;desired&rdquo; name of the box plus the fixed
                prefix
                <span class="texttt">not yet positionedPGFINTERNAL</span>. The
                idea is to ensure that the original name is not inadvertently
                used before the node is actually positioned. When
                <span class="texttt">\pgfpositionnodenow</span> is called, it
                will change the name to the original name.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelaterminx"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelaterminx</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelaterminx"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                The minimal \(x\)-position of a bounding box of the node. This
                bounding box refers to the node when it is positioned with the
                anchor at the origin. It is guaranteed, that this macro will
                contain a dimension in the format
                <span class="angle">&langle;</span><i>number</i
                ><span class="angle">&rangle;</span
                ><span class="texttt">pt</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelaterminy"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelaterminy</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelaterminy"
                    >&para;</a
                  >
                </p>
              </div>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelatermaxx"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelatermaxx</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelatermaxx"
                    >&para;</a
                  >
                </p>
              </div>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelatermaxy"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelatermaxy</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelatermaxy"
                    >&para;</a
                  >
                </p>
              </div>
            </div>
            <p>
              Once a late node has been created, you can add arbitrary code in
              the same picture. Then, at some later point, you call
              <span class="texttt">\pgfpositionnodenow</span> to finally
              position the node at a given position. At this point, the above
              macros must have the exact same values they had when
              <span class="angle">&langle;</span><i>macro name</i
              ><span class="angle">&rangle;</span> was called. Note that the
              above macros are local to a scope that ends right after the call
              to <span class="angle">&langle;</span><i>macro name</i
              ><span class="angle">&rangle;</span>, so it is your job to copy
              the values to safety inside <span class="angle">&langle;</span
              ><i>macro name</i><span class="angle">&rangle;</span>.
            </p>
            <p>
              The following two macros will also be set inside the call to
              <span class="angle">&langle;</span><i>macro name</i
              ><span class="angle">&rangle;</span>, but they are only
              &ldquo;informative&rdquo; in the sense that you need
              <em>not</em> restore these macros when
              <span class="texttt">\pgfpositionnodenow</span> is called.
            </p>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/pgfpositionnodelaterpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\pgfpositionnodelaterpath</kbd></span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/pgfpositionnodelaterpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This macro stores the path of the background of the node. See
                Section&nbsp;<a href="pgfsys-paths#section-soft-paths">120</a>
                for an overview of how these paths are encode.
              </p>
            </div>
            <p>
              By setting <span class="angle">&langle;</span><i>macro name</i
              ><span class="angle">&rangle;</span> to
              <span class="texttt">\relax</span> (which is the default), you can
              switch off the whole mechanism. When a picture is interrupted,
              this is done automatically.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfpositionnodenow"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfpositionnodenow</kbd></span
                  >{<span class="angle">&langle;</span><i>coordinate</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfpositionnodenow"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command is used to position a node that has previously been
              created using the command
              <span class="texttt">\pgfpositionnodelater</span>. When
              <span class="texttt">\pgfpositionnodenow</span> is called, the
              macros and boxes mentioned in the description of
              <span class="texttt">\pgfpositionnodenow</span> must be set to the
              value they had when the <span class="angle">&langle;</span
              ><i>macro name</i><span class="angle">&rangle;</span> was called.
              Provided this is the case, this command will insert the box into
              the current picture, shifted by <span class="angle">&langle;</span
              ><i>coordinate</i><span class="angle">&rangle;</span>. Then, the
              late code (see below) is called. Subsequently, you can refer to
              the node with its original name as if it had just been created.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3226"
                    ><!--
          ld
       wor
   llo
He
   -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="99.842"
                      loading="lazy"
                      src="pgfmanual-images/image-3226.png"
                      style
                      width="125.042"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2">\newbox</span
                  ><span class="textcolor" style="color: #0000b2">\mybox</span
                  ><br />
                  <br />
                  <span class="textcolor" style="color: #0000b2">\def</span
                  ><span class="textcolor" style="color: #0000b2">\mysaver</span
                  >{<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\setbox</span
                  ><span class="textcolor" style="color: #0000b2">\mybox</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\box</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterbox"
                      >\pgfpositionnodelaterbox</a
                    ></span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\myname</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatername"
                      >\pgfpositionnodelatername</a
                    ></span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\myminx</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterminx"
                      >\pgfpositionnodelaterminx</a
                    ></span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\myminy</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterminy"
                      >\pgfpositionnodelaterminy</a
                    ></span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\mymaxx</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatermaxx"
                      >\pgfpositionnodelatermaxx</a
                    ></span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\global</span
                  ><span class="textcolor" style="color: #0000b2">\let</span
                  ><span class="textcolor" style="color: #0000b2">\mymaxy</span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatermaxy"
                      >\pgfpositionnodelatermaxy</a
                    ></span
                  ><br />
                  }<br />
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelater"
                      >\pgfpositionnodelater</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    >\mysaver</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="tikz-shapes#pgf.back/node">\node</a></span
                  >&numsp;[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >=<span class="textcolor" style="color: #008000">blue!20</span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-shapes#pgf.below">below</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-transformations#pgf.rotate">rotate</a></span
                  >=<span class="textcolor" style="color: #008000">30</span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(hi)</span
                  >&numsp;{<span class="textcolor" style="color: #000000"
                    >Hello</span
                  >
                  <span class="textcolor" style="color: #000000">world</span
                  >};<br />
                  &numsp;&numsp;}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >&numsp;[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(0,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(3,2)</span
                  >;<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatername"
                      >\pgfpositionnodelatername</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\myname</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterminx"
                      >\pgfpositionnodelaterminx</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\myminx</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterminy"
                      >\pgfpositionnodelaterminy</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\myminy</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatermaxx"
                      >\pgfpositionnodelatermaxx</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\mymaxx</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\let</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelatermaxy"
                      >\pgfpositionnodelatermaxy</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\mymaxy</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    >\setbox</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodelaterbox"
                      >\pgfpositionnodelaterbox</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2">\box</span
                  ><span class="textcolor" style="color: #0000b2">\mybox</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpositionnodenow"
                      >\pgfpositionnodenow</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-quick#pgf.back/pgfqpoint"
                      >\pgfqpoint</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">2cm</span
                  >}{<span class="textcolor" style="color: #000000">2cm</span
                  >}}<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >&numsp;<span class="textcolor" style="color: #800080"
                    >(hi)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.--">--</a></span
                  >
                  <span class="textcolor" style="color: #800080">(0,0)</span
                  >;<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfnodepostsetupcode"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfnodepostsetupcode</kbd></span
                  >{<span class="angle">&langle;</span><i>node name</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>code</i><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfnodepostsetupcode"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              When you call this macro inside a scope for which the
              <span class="texttt">\pgfpositionnodelater</span> has been called,
              the <span class="angle">&langle;</span><i>code</i
              ><span class="angle">&rangle;</span> will be stored internally.
              Later, when the node named <span class="angle">&langle;</span
              ><i>node name</i><span class="angle">&rangle;</span> is actually
              positioned using <span class="texttt">\pgfpositionnodenow</span>,
              the <span class="angle">&langle;</span><i>code</i
              ><span class="angle">&rangle;</span> will be executed. When this
              macro is called multiple times with the same
              <span class="angle">&langle;</span><i>node name</i
              ><span class="angle">&rangle;</span>, the
              <span class="angle">&langle;</span><i>code</i
              ><span class="angle">&rangle;</span> accumulates. However, When
              <span class="texttt">\pgfpositionnodenow</span> is called, the
              code stored for the node is cleared.
            </p>
            <p>
              The main purpose of this mechanism is to allow
              <span class="tikzname">TikZ</span> to store so-called &ldquo;late
              options&rdquo; with a node that will be positioned only later.
            </p>
          </div>
          <h5 id="autosec-8027">
            <span class="sectionnumber" id="sec-105.3">105.3&emsp;</span>Using
            Anchors<a class="anchor-link" href="#sec-105.3">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-8027"></a>

          <p>
            Each shape defines a set of anchors. We saw already that the anchors
            are used when the shape is drawn: the shape is placed in such a way
            that the given anchor is at the origin (which in turn is typically
            translated somewhere else).
          </p>

          <p>
            One has to look up the set of anchors of each shape, there is no
            &ldquo;default&rdquo; set of anchors, except for the
            <span class="texttt">center</span> anchor, which should always be
            present. Also, most shapes will declare anchors like
            <span class="texttt">north</span> or
            <span class="texttt">east</span>, but this is not guaranteed.
          </p>
          <h6 id="autosec-8028">
            <span class="sectionnumber" id="sec-105.3.1">105.3.1&emsp;</span
            >Referencing Anchors of Nodes in the Same Picture<a
              class="anchor-link"
              href="#sec-105.3.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8028"></a>

          <p>
            Once a node has been defined, you can refer to its anchors using the
            following commands:
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfpointanchor"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfpointanchor</kbd></span
                  >{<span class="angle">&langle;</span><i>node</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>anchor</i><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfpointanchor"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command is another &ldquo;point command&rdquo; like the
              commands described in Section&nbsp;<a
                href="base-points#section-points"
                >100</a
              >. It returns the coordinate of the given
              <span class="angle">&langle;</span><i>anchor</i
              ><span class="angle">&rangle;</span> in the given
              <span class="angle">&langle;</span><i>node</i
              ><span class="angle">&rangle;</span>. The command can be used in
              commands like <span class="texttt">\pgfpathmoveto</span>.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3227"
                    ><!--
          ld!
        or
       W
 e llo
H
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="69.362"
                      loading="lazy"
                      src="pgfmanual-images/image-3227.png"
                      style
                      width="94.730"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformrotate"
                      >\pgftransformrotate</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">30</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World!</span
                  >}{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">north</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">south</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">east</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">west</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">north</span>
                  <span class="textcolor" style="color: #000000">east</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              In the above example, you may have noticed something curious: The
              rotation transformation is still in force when the anchors are
              invoked, but it does not seem to have an effect. You might expect
              that the rotation should apply to the already rotated points once
              more.
            </p>
            <p>
              However, <span class="texttt">\pgfpointanchor</span> returns a
              point that takes the current transformation matrix into account:
              <em
                >The inverse transformation to the current coordinate
                transformation is applied to an anchor point before returning
                it.</em
              >
            </p>
            <p>
              This behavior may seem a bit strange, but you will find it very
              natural in most cases. If you really want to apply a
              transformation to an anchor point (for example, to &ldquo;shift it
              away&rdquo; a little bit), you have to invoke
              <span class="texttt">\pgfpointanchor</span> without any
              transformations in force. Here is an example:
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3228"
                    ><!--
          ld!
        or
       W
 e llo
H
   -->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="78.650"
                      loading="lazy"
                      src="pgfmanual-images/image-3228.png"
                      style
                      width="94.730"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformrotate"
                      >\pgftransformrotate</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">30</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World!</span
                  >}{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  <br />
                  &numsp;&numsp;{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformreset"
                      >\pgftransformreset</a
                    ></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #000000">east</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\xdef</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\mycoordinate</span
                  >{<span class="textcolor" style="color: #0000b2"
                    >\noexpand</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2">\the</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@x"
                      >\pgf@x</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2">\the</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@y"
                      >\pgf@y</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;}<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    >\mycoordinate</span
                  >}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              A special situation arises when the
              <span class="angle">&langle;</span><i>node</i
              ><span class="angle">&rangle;</span> lies in a picture different
              from the current picture. In this case, if you have not told
              <span class="textsc">pgf</span> that the picture should be
              &ldquo;remembered&rdquo;, the <span class="angle">&langle;</span
              ><i>node</i><span class="angle">&rangle;</span> will be treated as
              if it lay in the current picture. For example, if the
              <span class="angle">&langle;</span><i>node</i
              ><span class="angle">&rangle;</span> was at position \((3,2)\) in
              the original picture, it is treated as if it lay at position
              \((3,2)\) in the current picture. However, if you have told
              <span class="textsc">pgf</span> to remember the picture position
              of the node&rsquo;s picture and also of the current picture, then
              <span class="texttt">\pgfpointanchor</span> will return a
              coordinate that corresponds to the position of the node&rsquo;s
              anchor on the page, transformed into the current coordinate
              system. For examples and more details see Section&nbsp;<a
                href="base-nodes#section-cross-pictures-pgf"
                >105.3.2</a
              >.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfpointshapeborder"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfpointshapeborder</kbd></span
                  >{<span class="angle">&langle;</span><i>node</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>point</i><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfpointshapeborder"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command returns the point on the border of the shape that
              lies on a straight line from the center of the node to
              <span class="angle">&langle;</span><i>point</i
              ><span class="angle">&rangle;</span>. For complex shapes it is not
              guaranteed that this point will actually lie on the border, it may
              be on the border of a &ldquo;simplified&rdquo; version of the
              shape.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3229"
                    ><!--
          ld!
        or
       W
 e llo
H
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="75.146"
                      loading="lazy"
                      src="pgfmanual-images/image-3229.png"
                      style
                      width="126.962"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #000000"
                    >\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfscope">pgfscope</a></span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformrotate"
                      >\pgftransformrotate</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">30</span
                  >}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfnode">\pgfnode</a></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #000000">Hello</span>
                  <span class="textcolor" style="color: #000000">World!</span
                  >}{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">stroke</span
                  >}}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #000000"
                    >\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfscope">pgfscope</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointshapeborder"
                      >\pgfpointshapeborder</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">2cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">2cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointshapeborder"
                      >\pgfpointshapeborder</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.x">x</a></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">-1cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathcircle"
                      >\pgfpathcircle</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">-1cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}{<span class="textcolor" style="color: #000000">2pt</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              <em>Remark:</em> If the given <span class="angle">&langle;</span
              ><i>point</i><span class="angle">&rangle;</span> is almost
              identical to the center of <span class="angle">&langle;</span
              ><i>node</i><span class="angle">&rangle;</span>, the node center
              is returned and a warning message will be printed.
            </p>
          </div>
          <h6 id="autosec-8035">
            <a id="section-cross-pictures-pgf"></a
            ><span class="sectionnumber" id="sec-105.3.2">105.3.2&emsp;</span
            >Referencing Anchors of Nodes in Different Pictures<a
              class="anchor-link"
              href="#sec-105.3.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8035"></a>

          <p>
            As a picture is typeset, <span class="textsc">pgf</span> keeps track
            of the positions of all nodes inside the picture. What
            <span class="textsc">pgf</span> does not remember is the position of
            the picture <em>itself</em> on the page. Thus, if you define a node
            in one picture and then try to reference this node while another
            picture is typeset, <span class="textsc">pgf</span> will only know
            the position of the nodes that you try to typeset inside the
            original picture, but it will not know where this picture lies. What
            is missing is the relative positioning of the two pictures.
          </p>

          <p>
            To overcome this problem, you need to tell
            <span class="textsc">pgf</span> that it should remember the position
            of pictures on a page. If these positions are remembered, then
            <span class="textsc">pgf</span> can compute the offset between the
            pictures and make nodes in different pictures accessible.
          </p>

          <p>
            Determining the positions of pictures on the page is, alas,
            not-so-easy. Because of this, <span class="textsc">pgf</span> does
            not do so automatically. Rather, you have to proceed as follows:
          </p>
          <ul style="list-style-type: none">
            <li>
              <p>
                1. You have to use a backend driver that supports position
                tracking. pdf<span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                is one such driver, <span class="texttt">dvips</span>
                currently is not.
              </p>
            </li>
            <li>
              <p>
                2. You have to say
                <span class="texttt"
                  >\pgfrememberpicturepositiononpagetrue</span
                >
                somewhere before or inside every picture
              </p>
              <ul style="list-style-type: none">
                <li>
                  <p>&bull; in which you wish to reference a node and</p>
                </li>
                <li>
                  <p>
                    &bull; from which you wish to reference a node in another
                    picture.
                  </p>
                </li>
              </ul>
              <p>
                The second item is important since
                <span class="textsc">pgf</span> does not only need to know the
                position of the picture in which the node you wish to reference
                lies, but it also needs to know where the current picture lies.
              </p>
            </li>
            <li>
              <p>
                3. You typically have to run
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                twice (depending on the backend driver) since the position
                information typically gets written into an external file on the
                first run and is available only on the second run.
              </p>
            </li>
            <li>
              <p>
                4. You have to switch off automatic bounding bound computations.
                The reason is that the node in the other picture should not
                influence the size of the bounding box of the current picture.
                You should say
                <span class="texttt">\pgfusepath{use as bounding box}</span>
                before using a coordinate in another picture.
              </p>
            </li>
          </ul>
          <h5 id="autosec-8036">
            <span class="sectionnumber" id="sec-105.4">105.4&emsp;</span>Special
            Nodes<a class="anchor-link" href="#sec-105.4">&para;</a>
          </h5>
          <a id="pgfmanual-autopage-8036"></a>

          <p>
            There are several special nodes that are always defined and which
            you should not attempt to redefine.
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.current:bounding:box"></a>
                <span class="hl-def"
                  ><b>Predefined node</b>
                  <kbd
                    ><span class="textcolor" style="color: #bf0000"
                      >current bounding box</span
                    ></kbd
                  ></span
                >
                <a class="anchor-link" href="#pgf.current:bounding:box"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This node is of shape <span class="texttt">rectangle</span>.
              Unlike normal nodes, its size changes constantly and always
              reflects the size of the bounding box of the current picture. This
              means that, for instance, that
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    >current</span
                  >
                  <span class="textcolor" style="color: #000000">bounding</span>
                  <span class="textcolor" style="color: #000000">box</span
                  >}{<span class="textcolor" style="color: #000000">south</span>
                  <span class="textcolor" style="color: #000000">east</span
                  >}<br />
                </code>
              </div>
            </figure>
            <p>
              returns the lower left corner of the bounding box of the current
              picture.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.current:path:bounding:box"></a>
                <span class="hl-def"
                  ><b>Predefined node</b>
                  <kbd
                    ><span class="textcolor" style="color: #bf0000"
                      >current path bounding box</span
                    ></kbd
                  ></span
                >
                <a class="anchor-link" href="#pgf.current:path:bounding:box"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This node is also of shape <span class="texttt">rectangle</span>.
              Its size is the size of the bounding box of the current path.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.current:subpath:start"></a>
                <span class="hl-def"
                  ><b>Predefined node</b>
                  <kbd
                    ><span class="textcolor" style="color: #bf0000"
                      >current subpath start</span
                    ></kbd
                  ></span
                >
                <a class="anchor-link" href="#pgf.current:subpath:start"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This node is of shape <span class="texttt">coordinate</span> and
              is at the beginning of the current subpath. This is the position
              of the last move-to operation.
            </p>
          </div>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.current:page"></a>
                <span class="hl-def"
                  ><b>Predefined node</b>
                  <kbd
                    ><span class="textcolor" style="color: #bf0000"
                      >current page</span
                    ></kbd
                  ></span
                >
                <a class="anchor-link" href="#pgf.current:page">&para;</a>
              </p>
            </div>
            <p>
              This node is inside a virtual remembered picture. The size of this
              node is the size of the current page. This means that if you
              create a remembered picture and inside this picture you reference
              an anchor of this node, you reference an absolute position on the
              page. To demonstrate the effect, the following code puts some text
              in the lower left corner of the current page. Note that this works
              only if the backend driver supports it, otherwise the text is
              inserted right here.
              <span class="lateximagesource" id="lateximage-pgfmanual-3230"
                ><!--
Text absolutely positioned in the lower left corner.
         -->
                <img
                  alt="(-tikz-&nbsp;diagram)"
                  class="lateximage"
                  height="14.571"
                  loading="lazy"
                  src="pgfmanual-images/image-3230.png"
                  style
                  width="341.258"
              /></span>
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2"
                    >\pgfrememberpicturepositiononpagetrue</span
                  ><br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-actions#pgf.back/pgfusepath"
                      >\pgfusepath</a
                    ></span
                  >{<span class="textcolor" style="color: #000000">use</span>
                  <span class="textcolor" style="color: #000000"
                    ><a href="tikz-graphs#pgf.as">as</a></span
                  >
                  <span class="textcolor" style="color: #000000">bounding</span>
                  <span class="textcolor" style="color: #000000">box</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformshift"
                      >\pgftransformshift</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfpointanchor"
                      >\pgfpointanchor</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    >current</span
                  >
                  <span class="textcolor" style="color: #000000">page</span
                  >}{<span class="textcolor" style="color: #000000">south</span>
                  <span class="textcolor" style="color: #000000">west</span
                  >}}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-transformations#pgf.back/pgftransformshift"
                      >\pgftransformshift</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #000000">1cm</span
                  >}{<span class="textcolor" style="color: #000000">1cm</span
                  >}}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.back/pgftext">\pgftext</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-arrows#pgf.left">left</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-animations#pgf.base">base</a></span
                  >]{<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\textcolor</span
                  >{<span class="textcolor" style="color: #000000">red</span
                  >}{<br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #000000"
                    >Text</span
                  >
                  <span class="textcolor" style="color: #000000"
                    >absolutely</span
                  >
                  <span class="textcolor" style="color: #000000"
                    >positioned</span
                  >
                  <span class="textcolor" style="color: #000000"
                    ><a href="library-edges#pgf.in">in</a></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #000000"
                    >the</span
                  >
                  <span class="textcolor" style="color: #000000">lower</span>
                  <span class="textcolor" style="color: #000000"
                    ><a href="tikz-arrows#pgf.left">left</a></span
                  >
                  <span class="textcolor" style="color: #000000">corner</span
                  >.}<br />
                  &numsp;&numsp;}<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-scopes#pgf.pgfpicture">pgfpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>

          <p>
            There is also an option that allows you to create new special nodes
            quite similar to the above:
          </p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf./pgf/local:bounding:box"></a
                ><a id="pgf.local:bounding:box"></a>
                <span class="hl-def"
                  ><kbd
                    ><span class="keyname"
                      ><span class="textcolor" style="color: #bf0000"
                        >/pgf/local bounding box</span
                      ></span
                    >=</kbd
                  ><span class="angle">&langle;</span><i>node name</i
                  ><span class="angle">&rangle;</span></span
                ><span class="hl-default">(no default)</span>
                <a class="anchor-link" href="#pgf./pgf/local:bounding:box"
                  >&para;</a
                >
              </p>
            </div>

            <p>alias <kbd>/tikz/local bounding box</kbd></p>
            <p>
              <a id="pgf./tikz/local:bounding:box"></a> This defines a new node
              <span class="angle">&langle;</span><i>node name</i
              ><span class="angle">&rangle;</span> whose size is the bounding
              box around all objects in the current scope starting at the
              position where this option was given. After the end of the scope,
              the <span class="angle">&langle;</span><i>node name</i
              ><span class="angle">&rangle;</span> is still available. You can
              use this option to keep track of the size of a certain area. Note
              that excessive use of this option (keeping track of dozens of
              bounding boxes at the same time) will slow things down.
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3231"
                    ><!--
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="97.586"
                      loading="lazy"
                      src="pgfmanual-images/image-3231.png"
                      style
                      width="116.341"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <span class="c- preamble">\usetikzlibrary {scopes} </span
                  ><br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >&numsp;[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.help:lines">help lines</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(0,0)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.grid">grid</a></span
                  >
                  <span class="textcolor" style="color: #800080">(3,2)</span
                  >;<br />
                  &numsp;&numsp;{&numsp;[<span
                    class="textcolor"
                    style="color: #008000"
                    ><a href="base-nodes#pgf.local:bounding:box"
                      >local bounding box</a
                    ></span
                  >=<span class="textcolor" style="color: #008000"
                    >outer box</span
                  >]<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >&numsp;<span class="textcolor" style="color: #800080"
                    >(1,1)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.circle">circle</a></span
                  >
                  <span class="textcolor" style="color: #800080">(.5)</span
                  >&numsp;[<span class="textcolor" style="color: #008000"
                    ><a href="base-nodes#pgf.local:bounding:box"
                      >local bounding box</a
                    ></span
                  >=<span class="textcolor" style="color: #008000"
                    >inner box</span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(2,2)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.circle">circle</a></span
                  >
                  <span class="textcolor" style="color: #800080">(.5)</span
                  >;<br />
                  &numsp;&numsp;}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >&numsp;&numsp;&numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #800080"
                    >(outer box.south west)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >
                  <span class="textcolor" style="color: #800080"
                    >(outer box.north east)</span
                  >;<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000">red</span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(inner box.south west)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >
                  <span class="textcolor" style="color: #800080"
                    >(inner box.north east)</span
                  >;<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>
          <h5 id="autosec-8041">
            <span class="sectionnumber" id="sec-105.5">105.5&emsp;</span
            >Declaring New Shapes<a class="anchor-link" href="#sec-105.5"
              >&para;</a
            >
          </h5>
          <a id="pgfmanual-autopage-8041"></a>

          <p>
            There are only three predefined shapes, see Section&nbsp;<a
              href="library-shapes#section-predefined-shapes"
              >70.2</a
            >, so there must be some way of defining new shapes. Defining a
            shape is, unfortunately, a not-quite-trivial process. The reason is
            that shapes need to be both very flexible (their size will vary
            greatly according to circumstances) and they need to be constructed
            reasonably &ldquo;fast&rdquo;. <span class="textsc">pgf</span> must
            be able to handle pictures with several hundreds of nodes and
            documents with thousands of nodes in total. It would not do if
            <span class="textsc">pgf</span> had to compute and store, say,
            dozens of anchor positions for every node.
          </p>
          <h6 id="autosec-8042">
            <span class="sectionnumber" id="sec-105.5.1">105.5.1&emsp;</span
            >What Must Be Defined For a Shape?<a
              class="anchor-link"
              href="#sec-105.5.1"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8042"></a>

          <p>In order to define a new shape, you must provide:</p>
          <ul style="list-style-type: none">
            <li>
              <p>&bull; a <em>shape name</em>,</p>
            </li>
            <li>
              <p>
                &bull; code for computing the <em>saved anchors</em> and
                <em>saved dimensions</em>,
              </p>
            </li>
            <li>
              <p>
                &bull; code for computing <em>anchor</em> positions in terms of
                the saved anchors,
              </p>
            </li>
            <li>
              <p>
                &bull; optionally code for the <em>background path</em> and
                <em>foreground path</em>,
              </p>
            </li>
            <li>
              <p>
                &bull; optionally code for
                <em>things to be drawn before or behind</em> the background and
                foreground paths.
              </p>
            </li>
            <li>
              <p>&bull; optionally a list of node parts.</p>
            </li>
          </ul>
          <h6 id="autosec-8043">
            <span class="sectionnumber" id="sec-105.5.2">105.5.2&emsp;</span
            >Normal Anchors Versus Saved Anchors<a
              class="anchor-link"
              href="#sec-105.5.2"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8043"></a>

          <p>
            Anchors are special places in a shape. For example, the
            <span class="texttt">north east</span> anchor, which is a normal
            anchor, lies at the upper right corner of the
            <span class="texttt">rectangle</span> shape, as does
            <span class="texttt">\northeast</span>, which is a saved anchor. The
            difference is the following:
            <em
              >saved anchors are computed and stored for each node, anchors are
              only computed as needed.</em
            >
            The user only has access to the normal anchors, but a normal anchor
            can just &ldquo;copy&rdquo; or &ldquo;pass through&rdquo; the
            location of a saved anchor.
          </p>

          <p>
            The idea behind all this is that a shape can declare a very large
            number of normal anchors, but when a node of this shape is created,
            these anchors are not actually computed. However, this causes a
            problem: When we wish to reference an anchor of a node at some later
            time, we must still be able to compute the position of the anchor.
            For this, we may need a lot of information: What was the
            transformation matrix that was in force when the node was created?
            What was the size of the text box? What were the values of the
            different separation dimensions? And so on.
          </p>

          <p>
            To solve this problem, <span class="textsc">pgf</span> will always
            compute the locations of all <em>saved anchors</em> and store these
            positions. Then, when an normal anchor position is requested later
            on, the anchor position can be given just from knowing where the
            locations of the saved anchors are.
          </p>

          <p>
            As an example, consider the
            <span class="texttt">rectangle</span> shape. For this shape two
            anchors are saved: The <span class="texttt">\northeast</span> corner
            and the <span class="texttt">\southwest</span> corner. A normal
            anchor like <span class="texttt">north west</span> can now easily be
            expressed in terms of these coordinates: Take the \(x\)-position of
            the <span class="texttt">\southwest</span> point and the
            \(y\)-position of the <span class="texttt">\northeast</span> point.
            The <span class="texttt">rectangle</span> shape currently defines 13
            normal anchors, but needs only two saved anchors. Adding new anchors
            like a <span class="texttt">south south east</span>
            anchor would not increase the memory and computation requirements of
            pictures.
          </p>

          <p>
            All anchors (both saved and normal) are specified in a local
            <em>shape coordinate space</em>. This is also true for the
            background and foreground paths. The
            <span class="texttt">\pgfnode</span> macro will automatically apply
            appropriate transformations to the coordinates so that the shape is
            shifted to the right anchor or otherwise transformed.
          </p>
          <h6 id="autosec-8044">
            <span class="sectionnumber" id="sec-105.5.3">105.5.3&emsp;</span
            >Command for Declaring New Shapes<a
              class="anchor-link"
              href="#sec-105.5.3"
              >&para;</a
            >
          </h6>
          <a id="pgfmanual-autopage-8044"></a>

          <p>The following command declares a new shape:</p>

          <div class="manualentry">
            <div class="entryheadline">
              <p>
                <a id="pgf.back/pgfdeclareshape"></a>
                <span class="hl-def"
                  ><span class="textcolor" style="color: #bf0000"
                    ><kbd>\pgfdeclareshape</kbd></span
                  >{<span class="angle">&langle;</span><i>shape name</i
                  ><span class="angle">&rangle;</span>}{<span class="angle"
                    >&langle;</span
                  ><i>shape specification</i
                  ><span class="angle">&rangle;</span>}</span
                >
                <a class="anchor-link" href="#pgf.back/pgfdeclareshape"
                  >&para;</a
                >
              </p>
            </div>
            <p>
              This command declares a new shape named
              <span class="angle">&langle;</span><i>shape name</i
              ><span class="angle">&rangle;</span>. The shape name can later be
              used in commands like <span class="texttt">\pgfnode</span>.
            </p>
            <p>
              The <span class="angle">&langle;</span><i>shape specification</i
              ><span class="angle">&rangle;</span> is some
              <span class="latexlogofont"
                ><span class="latexlogo"
                  >T<span class="latexlogosub">e</span>X</span
                ></span
              >
              code containing calls to special commands that are only defined
              inside the <span class="angle">&langle;</span
              ><i>shape specification</i
              ><span class="angle">&rangle;</span> (similarly to commands like
              <span class="texttt">\draw</span> that are only available inside
              the <span class="texttt">{tikzpicture}</span> environment).
            </p>
            <p>
              <i>Example: </i>Here is the code of the
              <span class="texttt">coordinate</span> shape:
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfdeclareshape"
                      >\pgfdeclareshape</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-shapes#pgf.coordinate">coordinate</a></span
                  >}<br />
                  {<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/savedanchor"
                      >\savedanchor</a
                    ></span
                  ><span class="textcolor" style="color: #0000b2"
                    >\centerpoint</span
                  >{<span class="example-code-comment">%</span><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@x"
                      >\pgf@x</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span>.<span
                    class="textcolor"
                    style="color: #000000"
                    >5</span
                  ><span class="textcolor" style="color: #0000b2">\wd</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodeparttextbox</span
                  ><span class="example-code-comment">%</span><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@y"
                      >\pgf@y</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span>.<span
                    class="textcolor"
                    style="color: #000000"
                    >5</span
                  ><span class="textcolor" style="color: #0000b2">\ht</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodeparttextbox</span
                  ><span class="example-code-comment">%</span><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\advance</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@y"
                      >\pgf@y</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-coordinates#pgf.by">by</a></span
                  >
                  <span class="textcolor" style="color: #000000">-</span>.<span
                    class="textcolor"
                    style="color: #000000"
                    >5</span
                  ><span class="textcolor" style="color: #0000b2">\dp</span
                  ><span class="textcolor" style="color: #0000b2"
                    >\pgfnodeparttextbox</span
                  ><span class="example-code-comment">%</span><br />
                  &numsp;&numsp;}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                  >{<span class="textcolor" style="color: #000000">center</span
                  >}{<span class="textcolor" style="color: #0000b2"
                    >\centerpoint</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/anchorborder"
                      >\anchorborder</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    >\centerpoint</span
                  >}<br />
                  }<br />
                </code>
              </div>
            </figure>
            <p>
              The special commands are explained next. In the examples given for
              the special commands a new shape will be constructed, which we
              might call <span class="texttt">simple rectangle</span>. It should
              behave like the normal rectangle shape, only without bothering
              about the fine details like inner and outer separations. The
              skeleton for the shape is the following.
            </p>

            <figure class="example">
              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <br />
                  <span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfdeclareshape"
                      >\pgfdeclareshape</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    ><a href="tikz-graphs#pgf.simple">simple</a></span
                  >
                  <span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >}{<br />
                  &numsp;&numsp;...<br />
                  }<br />
                </code>
              </div>
            </figure>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/nodeparts"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\nodeparts</kbd></span
                    >{<span class="angle">&langle;</span
                    ><i>list of node parts</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/nodeparts">&para;</a>
                </p>
              </div>
              <p>
                This command declares which parts make up nodes of this shape. A
                <em>node part</em> is a (possibly empty) text label that is
                drawn when a node of the shape is created.
              </p>
              <p>
                By default, a shape has just one node part called
                <span class="texttt">text</span>. However, there can be several
                node parts. For example, the
                <span class="texttt">circle split</span> shape has two parts:
                the <span class="texttt">text</span> part, which shows that the
                upper text, and a <span class="texttt">lower</span> part, which
                shows the lower text. For the
                <span class="texttt">circle split</span> shape the
                <span class="texttt">\nodeparts</span> command was called with
                the argument <span class="texttt">{text,lower}</span>.
              </p>
              <p>
                When a multipart node is created, the text labels are drawn in
                the sequences listed in the <span class="angle">&langle;</span
                ><i>list of node parts</i><span class="angle">&rangle;</span>.
                For each node part, you must have declared one anchor and the
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >-box of the part is placed at this anchor. For a node part
                called <span class="texttt">XYZ</span> the
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >-box <span class="texttt">\pgfnodepartXYZbox</span> is placed
                at anchor <span class="texttt">XYZ</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/savedanchor"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\savedanchor</kbd></span
                    >{<span class="angle">&langle;</span><i>command</i
                    ><span class="angle">&rangle;</span>}{<span class="angle"
                      >&langle;</span
                    ><i>code</i><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/savedanchor">&para;</a>
                </p>
              </div>
              <p>
                This command declares a saved anchor. The argument
                <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> should be a
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                macro name like <span class="texttt">\centerpoint</span>.
              </p>
              <p>
                The <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> will be executed each time
                <span class="texttt">\pgfnode</span> (or
                <span class="texttt">\pgfmultipartnode</span>) is called to
                create a node of the shape <span class="angle">&langle;</span
                ><i>shape name</i><span class="angle">&rangle;</span>. When the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed, the
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >-boxes of the node parts will contain the text labels of the
                node. Possibly, these box are void. For example, if there is
                just a <span class="texttt">text</span> part, the node
                <span class="texttt">\pgfnodeparttextbox</span> will be set up
                when the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed.
              </p>
              <p>
                The <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> can use the width, height,
                and depth of the box(es) to compute the location of the saved
                anchor. In addition, the <span class="angle">&langle;</span
                ><i>code</i><span class="angle">&rangle;</span> can take into
                account the values of dimensions like
                <span class="texttt">\pgfshapeminwidth</span> or
                <span class="texttt">\pgfshapeinnerxsep</span>. Furthermore, the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> can take into consideration
                the values of any further shape-specific variables that are set
                at the moment when <span class="texttt">\pgfnode</span> is
                called.
              </p>
              <p>
                The net effect of the <span class="angle">&langle;</span
                ><i>code</i><span class="angle">&rangle;</span> should be to set
                the two
                <span class="latexlogofont"
                  ><span class="latexlogo"
                    >T<span class="latexlogosub">e</span>X</span
                  ></span
                >
                dimensions <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span>. One way to achieve this is
                to say <span class="texttt">\pgfpoint{</span
                ><span class="angle">&langle;</span><i>x value</i
                ><span class="angle">&rangle;</span
                ><span class="texttt">}{</span
                ><span class="angle">&langle;</span><i>y value</i
                ><span class="angle">&rangle;</span
                ><span class="texttt">}</span> at the end of the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span>, but you can also just set
                these variables. The values that
                <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> have after the code has been
                executed, let us call them \(x\) and \(y\), will be recorded and
                stored together with the node that is created by the command
                <span class="texttt">\pgfnode</span>.
              </p>
              <p>
                The macro <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> is defined to be
                <span class="texttt">\pgfpoint{</span>\(x\)<span class="texttt"
                  >}{</span
                >\(y\)<span class="texttt">}</span>. However, the
                <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> is only locally defined
                while anchor positions are being computed. Thus, it is possible
                to use very simple names for <span class="angle">&langle;</span
                ><i>command</i><span class="angle">&rangle;</span>, like
                <span class="texttt">\center</span> or
                <span class="texttt">\a</span>, without causing a name-clash.
                (To be precise, very simple <span class="angle">&langle;</span
                ><i>command</i><span class="angle">&rangle;</span> names will
                clash with existing names, but only locally inside the
                computation of anchor positions; and we do not need the normal
                <span class="texttt">\center</span> command during these
                computations.)
              </p>
              <p>
                For our <span class="texttt">simple rectangle</span> shape, we
                will need only one saved anchor: The upper right corner. The
                lower left corner could either be the origin or the
                &ldquo;mirrored&rdquo; upper right corner, depending on whether
                we want the text label to have its lower left corner at the
                origin or whether the text label should be centered on the
                origin. Either will be fine, for the final shape this will make
                no difference since the shape will be shifted anyway. So, let us
                assume that the text label is centered on the origin (this will
                be specified later on using the
                <span class="texttt">text</span> anchor). We get the following
                code for the upper right corner:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/savedanchor"
                        >\savedanchor</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    >}{<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2">\ht</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >&numsp;<span class="example-code-comment"
                      >% height of the box, ignoring the depth</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2">\wd</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >&numsp;<span class="example-code-comment"
                      >% width of the box</span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                If we wanted to take, say, the
                <span class="texttt">\pgfshapeminwidth</span> into account, we
                could use the following code:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/savedanchor"
                        >\savedanchor</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    >}{<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    >.<span class="textcolor" style="color: #0000b2">\ht</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >&numsp;<span class="example-code-comment"
                      >% height of the box</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    >.<span class="textcolor" style="color: #0000b2">\wd</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >&numsp;<span class="example-code-comment"
                      >% width of the box</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\setlength</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@xa"
                        >\pgf@xa</a
                      ></span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\pgfshapeminwidth</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\ifdim</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">&lt;</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@xa"
                        >\pgf@xa</a
                      ></span
                    ><br />
                    &numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@xa"
                        >\pgf@xa</a
                      ></span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\fi</span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                Note that we could not have written
                <span class="texttt">.5\pgfshapeminwidth</span> since the
                minimum width is stored in a &ldquo;plain text macro&rdquo;, not
                as a real dimension. So if
                <span class="texttt">\pgfshapeminwidth</span> depth were 2cm,
                writing <span class="texttt">.5\pgfshapeminwidth</span> would
                yield the same as <span class="texttt">.52cm</span>.
              </p>
              <p>
                In the &ldquo;real&rdquo;
                <span class="texttt">rectangle</span> shape the code is somewhat
                more complex, but you get the basic idea.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/saveddimen"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\saveddimen</kbd></span
                    >{<span class="angle">&langle;</span><i>command</i
                    ><span class="angle">&rangle;</span>}{<span class="angle"
                      >&langle;</span
                    ><i>code</i><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/saveddimen">&para;</a>
                </p>
              </div>
              <p>
                This command is similar to
                <span class="texttt">\savedanchor</span>, only instead of
                setting <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> to
                <span class="texttt">\pgfpoint{</span>\(x\)<span class="texttt"
                  >}{</span
                >\(y\)<span class="texttt">}</span>, the
                <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> is set just to (the value
                of) \(x\).
              </p>
              <p>
                In the <span class="texttt">simple rectangle</span> shape we
                might use a saved dimension to store the depth of the shape box.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/saveddimen"
                        >\saveddimen</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\depth</span
                    >}{<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=</span
                    ><span class="textcolor" style="color: #0000b2">\dp</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/savedmacro"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\savedmacro</kbd></span
                    >{<span class="angle">&langle;</span><i>command</i
                    ><span class="angle">&rangle;</span>}{<span class="angle"
                      >&langle;</span
                    ><i>code</i><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/savedmacro">&para;</a>
                </p>
              </div>
              <p>
                This command is similar to
                <span class="texttt">\saveddimen</span>, only at some point in
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span>,
                <span class="angle">&langle;</span><i>command</i
                ><span class="angle">&rangle;</span> should be defined
                appropriately, (this could be a value, or some text).
              </p>
              <p>
                In the <span class="texttt">regular polygon</span> shape, a
                saved macro is used to store the number of sides of the polygon.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/savedmacro"
                        >\savedmacro</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\sides</span
                    >}{<span class="textcolor" style="color: #0000b2">\let</span
                    ><span class="textcolor" style="color: #0000b2">\sides</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfpolygonsides</span
                    >}<br />
                  </code>
                </div>
              </figure>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/anchor"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\anchor</kbd></span
                    >{<span class="angle">&langle;</span><i>name</i
                    ><span class="angle">&rangle;</span>}{<span class="angle"
                      >&langle;</span
                    ><i>code</i><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/anchor">&para;</a>
                </p>
              </div>
              <p>
                This command declares an anchor named
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>. Unlike for saved anchors,
                the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> will not be executed each
                time a node is declared. Rather, the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is only executed when the
                anchor is specifically requested; either for anchoring the node
                during its creation or as a position in the shape referenced
                later on.
              </p>
              <p>
                The <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span> is a quite arbitrary string
                that is not &ldquo;passed down&rdquo; to the system level. Thus,
                names like <span class="texttt">south</span> or
                <span class="texttt">1</span> or
                <span class="texttt">::</span> would all be fine.
              </p>
              <p>
                A saved anchor is not automatically also a normal anchor. If you
                wish to give the users access to a saved anchor you must declare
                a normal anchor that just returns the position of the saved
                anchor.
              </p>
              <p>
                When the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed, all saved
                anchor macros will be defined. Thus, you can reference them in
                your <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span>. The effect of the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> should be to set the values
                of <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> to the coordinates of the
                anchor.
              </p>
              <p>
                Let us consider some example for the
                <span class="texttt">simple rectangle</span> shape. First, we
                would like to make the upper right corner publicly available,
                for example as <span class="texttt">north east</span>:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      >north</span
                    >
                    <span class="textcolor" style="color: #000000">east</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                The <span class="texttt">\upperrightcorner</span> macro will set
                <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> to the coordinates of the
                upper right corner. Thus, <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> will have exactly the right
                values at the end of the anchor&rsquo;s code.
              </p>
              <p>
                Next, let us define a
                <span class="texttt">north west</span> anchor. For this anchor,
                we can negate the <span class="texttt">\pgf@x</span> variable:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      >north</span
                    >
                    <span class="textcolor" style="color: #000000">west</span
                    >}{<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=-</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                Finally, it is a good idea to always define a
                <span class="texttt">center</span> anchor, which will be the
                default location for a shape.
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      >center</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
              <p>
                You might wonder whether we should not take into consideration
                that the node is not placed at the origin, but has been shifted
                somewhere. However, the anchor positions are always specified in
                the shape&rsquo;s &ldquo;private&rdquo; coordinate system. The
                &ldquo;outer&rdquo; transformation that has been applied to the
                shape upon its creation is applied automatically to the
                coordinates returned by the anchor&rsquo;s
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span>.
              </p>
              <p>
                Our <span class="texttt">simple rectangle</span> only has one
                text label (node part) called <span class="texttt">text</span>.
                This is the default situation, so we do not need to do anything.
                For the <span class="texttt">text</span> node part we must set
                up a <span class="texttt">text</span> anchor. Upon creation of a
                node, this anchor will be made to coincide with the left
                endpoint of the baseline of the text label (within the private
                coordinate system of the shape). By default, the
                <span class="texttt">text</span> anchor is at the origin, but
                you may change this. For example, we would say
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.text">text</a></span
                    >}{<span class="example-code-comment">%</span><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    ><span class="example-code-comment">%</span><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=-</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="example-code-comment">%</span><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=-</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><span class="example-code-comment">%</span><br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                to center the text label on the origin in the shape coordinate
                space. Note that we could <em>not</em> have written the
                following:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.text">text</a></span
                    >}{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">-</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2">\wd</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >}{<span class="textcolor" style="color: #000000">-</span
                    >.<span class="textcolor" style="color: #000000">5</span
                    ><span class="textcolor" style="color: #0000b2">\ht</span
                    ><span class="textcolor" style="color: #0000b2"
                      >\pgfnodeparttextbox</span
                    >}}<br />
                  </code>
                </div>
              </figure>
              <p>
                Do you see why this is wrong? The problem is that the box
                <span class="texttt">\pgfnodeparttextbox</span> will most likely
                not have the correct size when the anchor is computed. After
                all, the anchor position might be recomputed at a time when
                several other nodes have been created.
              </p>
              <p>
                If a shape has several node parts, we would have to define an
                anchor for each part.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/deferredanchor"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\deferredanchor</kbd></span
                    >{<span class="angle">&langle;</span><i>name</i
                    ><span class="angle">&rangle;</span>}{<span class="angle"
                      >&langle;</span
                    ><i>code</i><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/deferredanchor"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command declares an anchor named
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span>. It works like
                <span class="texttt">\anchor</span>. However, unlike for anchors
                declared by <span class="texttt">\anchor</span>,
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span> will <em>not</em> be
                expanded during the shape declaration (i.e. not during
                <span class="texttt">\pgfdeclareshape</span>). Rather, the
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span> is expanded when the
                <em>node</em> is actually used (with
                <span class="texttt">\pgfnode</span> or more likely with
                <span class="texttt">\node</span>). This may be useful if the
                anchor name is context dependent (depending, for example, on the
                value of a key).
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      >\makeatletter</span
                    ><br />
                    <span class="textcolor" style="color: #0000b2">\def</span
                    ><span class="textcolor" style="color: #0000b2">\foo</span
                    >{<span class="textcolor" style="color: #000000">foo</span
                    >}<br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/pgfdeclareshape"
                        >\pgfdeclareshape</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-graphs#pgf.simple">simple</a></span
                    >
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-shapes#pgf.shape">shape</a></span
                    >}{<span class="example-code-comment">%</span><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/savedanchor"
                        >\savedanchor</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\center</span
                    >}{<span class="example-code-comment">%</span><br />
                    &numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointorigin"
                        >\pgfpointorigin</a
                      ></span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchor">\anchor</a></span
                    >{<span class="textcolor" style="color: #000000"
                      >center</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\center</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/savedanchor"
                        >\savedanchor</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\anchorfoo</span
                    >}{<span class="example-code-comment">%</span><br />
                    &numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=1cm</span
                    ><br />
                    &numsp;&numsp;&numsp;&numsp;<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><span class="textcolor" style="color: #000000">=0cm</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/deferredanchor"
                        >\deferredanchor</a
                      ></span
                    >{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.anchor">anchor</a></span
                    >
                    <span class="textcolor" style="color: #0000b2">\foo</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\anchorfoo</span
                    >}}<br />
                    <br />
                    <span class="textcolor" style="color: #000000">\begin</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-shapes#pgf.back/node">\node</a></span
                    >[<span class="textcolor" style="color: #008000"
                      >simple shape</span
                    >]&numsp;<span class="textcolor" style="color: #800080"
                      >(Test1)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.at">at</a></span
                    >
                    <span class="textcolor" style="color: #800080">(0,0)</span
                    >&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/fill">\fill</a></span
                    >&numsp;<span class="textcolor" style="color: #800080"
                      >(Test1.anchor foo)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.circle">circle</a></span
                    >
                    <span class="textcolor" style="color: #800080">(2pt)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.node">node</a></span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-shapes#pgf.below">below</a></span
                    >]&numsp;{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.anchor">anchor</a></span
                    >
                    <span class="textcolor" style="color: #000000">foo</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.anchor">anchor</a></span
                    >};<br />
                    &numsp;&numsp;<span class="example-code-comment">%</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\def</span
                    ><span class="textcolor" style="color: #0000b2">\foo</span
                    >{<span class="textcolor" style="color: #000000">bar</span
                    >}<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-shapes#pgf.back/node">\node</a></span
                    >[<span class="textcolor" style="color: #008000"
                      >simple shape</span
                    >]&numsp;<span class="textcolor" style="color: #800080"
                      >(Test2)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.at">at</a></span
                    >
                    <span class="textcolor" style="color: #800080">(2,2)</span
                    >&numsp;{};<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-actions#pgf.back/fill">\fill</a></span
                    >&numsp;<span class="textcolor" style="color: #800080"
                      >(Test2.anchor bar)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-paths#pgf.circle">circle</a></span
                    >
                    <span class="textcolor" style="color: #800080">(2pt)</span
                    >&numsp;<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.node">node</a></span
                    >[<span class="textcolor" style="color: #008000"
                      ><a href="tikz-shapes#pgf.below">below</a></span
                    >]&numsp;{<span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.anchor">anchor</a></span
                    >
                    <span class="textcolor" style="color: #000000">bar</span>
                    <span class="textcolor" style="color: #000000"
                      ><a href="tikz-coordinates#pgf.anchor">anchor</a></span
                    >};<br />
                    <span class="textcolor" style="color: #000000">\end</span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="tikz-scopes#pgf.tikzpicture"
                        >tikzpicture</a
                      ></span
                    >}<br />
                  </code>
                </div>
              </figure>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/anchorborder"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\anchorborder</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/anchorborder"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                A <em>border anchor</em> is an anchor point on the border of the
                shape. What exactly is considered as the &ldquo;border&rdquo; of
                the shape depends on the shape.
              </p>
              <p>
                When the user requests a point on the border of the shape using
                the <span class="texttt">\pgfpointshapeborder</span> command,
                the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> will be executed to discern
                this point. When the execution of the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> starts, the dimensions
                <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> will have been set to a
                location \(p\) in the shape&rsquo;s coordinate system, and
                relative to the anchor <span class="texttt">center</span>. Note
                that <span class="texttt">\pgfpointshapeborder</span> will
                produce an error if the shape does not contain the
                <span class="texttt">center</span> anchor.
              </p>
              <p>
                It is now the job of the <span class="angle">&langle;</span
                ><i>code</i><span class="angle">&rangle;</span> to set up
                <span class="texttt">\pgf@x</span> and
                <span class="texttt">\pgf@y</span> such that they specify the
                point on the shape&rsquo;s border that lies on a straight line
                from the shape&rsquo;s center to the point \(p\). Usually, this
                is a somewhat complicated computation, involving many case
                distinctions and some basic math. Note that the output
                coordinates must be returned in the shape&rsquo;s coordinate
                system, <em>no longer</em> relative to the
                <span class="texttt">center</span> anchor. While these different
                points of reference are only noticeable if the
                <span class="texttt">center</span> anchor is not at the origin
                of the shape&rsquo;s coordinate system, it implies that
                &ldquo;doing nothing&rdquo; as a border anchor, i.e., returning
                the point that was fed to
                <span class="texttt">\pgfpointshapeborder</span> requires adding
                the <span class="texttt">center</span> anchor to the input
                coordinates.
              </p>
              <p>
                For our <span class="texttt">simple rectangle</span> we must
                compute a point on the border of a rectangle whose one corner is
                the origin (ignoring the depth for simplicity) and whose other
                corner is <span class="texttt">\upperrightcorner</span>. The
                following code might be used:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/anchorborder"
                        >\anchorborder</a
                      ></span
                    >{<span class="example-code-comment">%</span><br />
                    &numsp;&numsp;<span class="example-code-comment"
                      >% Call a function that computes a border point. Since
                      this</span
                    ><br />
                    &numsp;&numsp;<span class="example-code-comment"
                      >% function will modify dimensions like \pgf@x, we must
                      move them to</span
                    ><br />
                    &numsp;&numsp;<span class="example-code-comment"
                      >% other dimensions.</span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\@tempdima</span
                    ><span class="textcolor" style="color: #000000">=</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@x"
                        >\pgf@x</a
                      ></span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      >\@tempdimb</span
                    ><span class="textcolor" style="color: #000000">=</span
                    ><span class="textcolor" style="color: #0000b2"
                      ><a href="base-internalregisters#pgf.back/pgf@y"
                        >\pgf@y</a
                      ></span
                    ><br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointborderrectangle"
                        >\pgfpointborderrectangle</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpoint"
                        >\pgfpoint</a
                      ></span
                    >{<span class="textcolor" style="color: #0000b2"
                      >\@tempdima</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\@tempdimb</span
                    >}}{<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    >}<br />
                    }<br />
                  </code>
                </div>
              </figure>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/backgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\backgroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/backgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command specifies the path that &ldquo;makes up&rdquo; the
                background of the shape. Note that the shape cannot prescribe
                what is going to happen with the path: It might be drawn,
                shaded, filled, or even thrown away. If you want to specify that
                something should &ldquo;always&rdquo; happen when this shape is
                drawn (for example, if the shape is a stop-sign, we
                <em>always</em> want it to be filled with a red color), you can
                use commands like
                <span class="texttt">\beforebackgroundpath</span>, explained
                below.
              </p>
              <p>
                When the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed, all saved
                anchors will be in effect. The
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> should contain path
                construction commands.
              </p>
              <p>
                For our <span class="texttt">simple rectangle</span>, the
                following code might be used:
              </p>

              <figure class="example">
                <div class="example-code">
                  <button class="clipboardButton" type="button">copy</button>
                  <code>
                    <br />
                    <span class="textcolor" style="color: #0000b2"
                      ><a href="base-nodes#pgf.back/backgroundpath"
                        >\backgroundpath</a
                      ></span
                    >{<br />
                    &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                      ><a href="base-paths#pgf.back/pgfpathrectanglecorners"
                        >\pgfpathrectanglecorners</a
                      ></span
                    ><br />
                    &numsp;&numsp;&numsp;&numsp;{<span
                      class="textcolor"
                      style="color: #0000b2"
                      >\upperrightcorner</span
                    >}<br />
                    &numsp;&numsp;&numsp;&numsp;{<span
                      class="textcolor"
                      style="color: #0000b2"
                      ><a href="base-points#pgf.back/pgfpointscale"
                        >\pgfpointscale</a
                      ></span
                    >{<span class="textcolor" style="color: #000000">-1</span
                    >}{<span class="textcolor" style="color: #0000b2"
                      >\upperrightcorner</span
                    >}}<br />
                    }<br />
                  </code>
                </div>
              </figure>
              <p>
                As the name suggests, the background path is used
                &ldquo;behind&rdquo; the text labels. Thus, this path is used
                first, then the text labels are drawn, possibly obscuring part
                of the path.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/foregroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\foregroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/foregroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command works like
                <span class="texttt">\backgroundpath</span>, only it is invoked
                after the text labels have been drawn. This means that this path
                can possibly obscure (part of) the text labels.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/behindbackgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\behindbackgroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/behindbackgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Unlike the previous two commands,
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> should not only construct a
                path, it should also use this path in whatever way is
                appropriate. For example, the <span class="angle">&langle;</span
                ><i>code</i><span class="angle">&rangle;</span> might fill some
                area with a uniform color.
              </p>
              <p>
                Whatever the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> does, it does it first.
                This means that any drawing done by
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> will be even behind the
                background path.
              </p>
              <p>
                Note that the <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is protected with a
                <span class="texttt">{pgfscope}</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/beforebackgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\beforebackgroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/beforebackgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command works like
                <span class="texttt">\behindbackgroundpath</span>, only the
                <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed after the
                background path has been used, but before the texts label are
                drawn.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/behindforegroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\behindforegroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/behindforegroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                The <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed after the text
                labels have been drawn, but before the foreground path is used.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/beforeforegroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\beforeforegroundpath</kbd></span
                    >{<span class="angle">&langle;</span><i>code</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/beforeforegroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This <span class="angle">&langle;</span><i>code</i
                ><span class="angle">&rangle;</span> is executed at the very
                end.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritsavedanchors"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritsavedanchors</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a class="anchor-link" href="#pgf.back/inheritsavedanchors"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command allows you to inherit the code for saved anchors
                from <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>. The idea is that if you
                wish to create a new shape that is just a small modification of
                a another shape, you can recycle the code used for
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
              <p>
                The effect of this command is the same as if you had called
                <span class="texttt">\savedanchor</span> and
                <span class="texttt">\saveddimen</span> for each saved anchor or
                saved dimension declared in <span class="angle">&langle;</span
                ><i>another shape name</i><span class="angle">&rangle;</span>.
                Thus, it is not possible to &ldquo;selectively&rdquo; inherit
                only some saved anchors, you always have to inherit all saved
                anchors from another shape. However, you can inherit the saved
                anchors of more than one shape by calling this command several
                times.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritbehindbackgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritbehindbackgroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/inheritbehindbackgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                This command can be used to inherit the code used for the
                drawings behind the background path from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritbackgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritbackgroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a class="anchor-link" href="#pgf.back/inheritbackgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the background path code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritbeforebackgroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritbeforebackgroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/inheritbeforebackgroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the before background path code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritbehindforegroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritbehindforegroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/inheritbehindforegroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the behind foreground path code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritforegroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritforegroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a class="anchor-link" href="#pgf.back/inheritforegroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the foreground path code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritbeforeforegroundpath"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritbeforeforegroundpath</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a
                    class="anchor-link"
                    href="#pgf.back/inheritbeforeforegroundpath"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the before foreground path code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritanchor"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritanchor</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    >{<span class="angle">&langle;</span><i>name</i
                    ><span class="angle">&rangle;</span>}</span
                  >
                  <a class="anchor-link" href="#pgf.back/inheritanchor"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the code of one specific anchor named
                <span class="angle">&langle;</span><i>name</i
                ><span class="angle">&rangle;</span> from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>. Thus, unlike saved
                anchors, which must be inherited collectively, normal anchors
                can and must be inherited individually.
              </p>
            </div>

            <div class="manualentry">
              <div class="entryheadline">
                <p>
                  <a id="pgf.back/inheritanchorborder"></a>
                  <span class="hl-def"
                    ><span class="textcolor" style="color: #bf0000"
                      ><kbd>\inheritanchorborder</kbd></span
                    ><span class="texttt">[from=</span>{<span class="angle"
                      >&langle;</span
                    ><i>another shape name</i
                    ><span class="angle">&rangle;</span>}<span class="texttt"
                      >]</span
                    ></span
                  >
                  <a class="anchor-link" href="#pgf.back/inheritanchorborder"
                    >&para;</a
                  >
                </p>
              </div>
              <p>
                Inherits the border anchor code from
                <span class="angle">&langle;</span><i>another shape name</i
                ><span class="angle">&rangle;</span>.
              </p>
            </div>
            <p>
              The following example shows how a shape can be defined that relies
              heavily on inheritance:
            </p>

            <figure class="example">
              <div class="example-image">
                <p>
                  <span class="lateximagesource" id="lateximage-pgfmanual-3232"
                    ><!--
Remark




 Use Case
-->
                    <img
                      alt="(-tikz-&nbsp;diagram)"
                      class="lateximage"
                      height="145.226"
                      loading="lazy"
                      src="pgfmanual-images/image-3232.png"
                      style
                      width="111.794"
                  /></span>
                </p>
              </div>

              <div class="example-code">
                <button class="clipboardButton" type="button">copy</button>
                <code>
                  <span class="c- preamble"
                    >\usetikzlibrary {shapes.geometric} </span
                  ><br />
                  <span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/pgfdeclareshape"
                      >\pgfdeclareshape</a
                    ></span
                  >{<span class="textcolor" style="color: #000000"
                    >document</span
                  >}{<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritsavedanchors"
                      >\inheritsavedanchors</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]&numsp;<span class="example-code-comment"
                    >% this is nearly a rectangle</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchorborder"
                      >\inheritanchorborder</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchor"
                      >\inheritanchor</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]{<span class="textcolor" style="color: #000000">center</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchor"
                      >\inheritanchor</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]{<span class="textcolor" style="color: #000000">north</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchor"
                      >\inheritanchor</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]{<span class="textcolor" style="color: #000000">south</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchor"
                      >\inheritanchor</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]{<span class="textcolor" style="color: #000000">west</span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/inheritanchor"
                      >\inheritanchor</a
                    ></span
                  >[<span class="textcolor" style="color: #008000">from</span
                  >=<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.rectangle">rectangle</a></span
                  >]{<span class="textcolor" style="color: #000000">east</span
                  >}<br />
                  &numsp;&numsp;<span class="example-code-comment"
                    >% ... and possibly more</span
                  ><br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-nodes#pgf.back/backgroundpath"
                      >\backgroundpath</a
                    ></span
                  >{<span class="example-code-comment">% this is new</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span class="example-code-comment"
                    >% store lower right in xa/ya and upper right in xb/yb</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\southwest</span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xa"
                      >\pgf@xa</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@x"
                      >\pgf@x</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@ya"
                      >\pgf@ya</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@y"
                      >\pgf@y</a
                    ></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    >\northeast</span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xb"
                      >\pgf@xb</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@x"
                      >\pgf@x</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yb"
                      >\pgf@yb</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@y"
                      >\pgf@y</a
                    ></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span class="example-code-comment"
                    >% compute corner of ``flipped page''</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xb"
                      >\pgf@xb</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    >\advance</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    >by-5pt</span
                  >
                  <span class="example-code-comment"
                    >% this should be a parameter</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  ><span class="textcolor" style="color: #000000">=</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yb"
                      >\pgf@yb</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #0000b2"
                    >\advance</span
                  ><span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    >by-5pt</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span class="example-code-comment"
                    >% construct main path</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathmoveto"
                      >\pgfpathmoveto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xa"
                      >\pgf@xa</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@ya"
                      >\pgf@ya</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xa"
                      >\pgf@xa</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yb"
                      >\pgf@yb</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yb"
                      >\pgf@yb</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xb"
                      >\pgf@xb</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xb"
                      >\pgf@xb</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@ya"
                      >\pgf@ya</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathclose"
                      >\pgfpathclose</a
                    ></span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span class="example-code-comment"
                    >% add little corner</span
                  ><br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathmoveto"
                      >\pgfpathmoveto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yb"
                      >\pgf@yb</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xb"
                      >\pgf@xb</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  >}}<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #0000b2"
                    ><a href="base-paths#pgf.back/pgfpathlineto"
                      >\pgfpathlineto</a
                    ></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-points#pgf.back/pgfpoint">\pgfpoint</a></span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@xc"
                      >\pgf@xc</a
                    ></span
                  >}{<span class="textcolor" style="color: #0000b2"
                    ><a href="base-internalregisters#pgf.back/pgf@yc"
                      >\pgf@yc</a
                    ></span
                  >}}<br />
                  &numsp;}<br />
                  }<span class="textcolor" style="color: #0000b2">\hskip-</span
                  ><span class="textcolor" style="color: #000000">1</span>.<span
                    class="textcolor"
                    style="color: #000000"
                    >2cm</span
                  ><br />
                  <span class="textcolor" style="color: #000000">\begin</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-shapes#pgf.back/node">\node</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.shade">shade</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.draw">draw</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-shapes#pgf.shape">shape</a></span
                  >=<span class="textcolor" style="color: #008000"
                    >document</span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-shapes#pgf.inner:sep">inner sep</a></span
                  >=<span class="textcolor" style="color: #008000">2ex</span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(x)</span
                  >&numsp;{<span class="textcolor" style="color: #000000"
                    >Remark</span
                  >};<br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-shapes#pgf.back/node">\node</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.fill">fill</a></span
                  >=<span class="textcolor" style="color: #008000"
                    >yellow!80!black</span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.draw">draw</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-paths#pgf.ellipse">ellipse</a></span
                  >,<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.double">double</a></span
                  >]<br />
                  &numsp;&numsp;&numsp;&numsp;<span
                    class="textcolor"
                    style="color: #000000"
                    ><a href="tikz-paths#pgf.at">at</a></span
                  >
                  <span class="textcolor" style="color: #800080"
                    >([shift=(-80:3cm)</span
                  ><span class="textcolor" style="color: #000000">]x</span
                  >)&numsp;<span class="textcolor" style="color: #800080"
                    >(y)</span
                  >&numsp;{<span class="textcolor" style="color: #000000"
                    >Use</span
                  >
                  <span class="textcolor" style="color: #000000">Case</span
                  >};<br />
                  <br />
                  &numsp;&numsp;<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-actions#pgf.back/draw">\draw</a></span
                  >[<span class="textcolor" style="color: #008000"
                    ><a href="tikz-actions#pgf.dashed">dashed</a></span
                  >]&numsp;<span class="textcolor" style="color: #800080"
                    >(x)</span
                  >&numsp;<span class="textcolor" style="color: #000000"
                    ><a href="tikz-paths#pgf.--">--</a></span
                  >
                  <span class="textcolor" style="color: #800080">(y)</span
                  >;<br />
                  <span class="textcolor" style="color: #000000">\end</span
                  >{<span class="textcolor" style="color: #0000b2"
                    ><a href="tikz-scopes#pgf.tikzpicture">tikzpicture</a></span
                  >}<br />
                </code>
              </div>
            </figure>
          </div>
        </section>
      </main>

      <footer>
        <div class_="footer-left">
          <a href="https://github.com/pgf-tikz/pgf">Github</a> &middot;
          <a href="/license">License</a> &middot;
          <a href="https://ctan.org/pkg/pgf">CTAN</a> &middot;
          <a href="https://pgf-tikz.github.io/pgf/pgfmanual.pdf">PDF version</a>
          &middot;
          <a href="https://github.com/DominikPeters/pgf-tikz-html-manual"
            >About this HTML version</a
          >
        </div>
        <div class_="footer-right">
          <em>Manual last updated: 2022-04-23</em>
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
    <script>
      docsearch({
        apiKey: "ae66ec3fc9df4b52b4d6f24fc8508fd3",
        indexName: "tikz.dev",
        appId: "Q70NNMA9GC",
        container: "#search",
      });
    </script>
  </body>
</html>
